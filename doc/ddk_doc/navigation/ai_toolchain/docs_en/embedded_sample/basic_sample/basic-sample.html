<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1. Foreword &mdash; Basic Sample  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Basic Sample User Guide" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Basic Sample
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">1. Foreword</a></li>
<li class="toctree-l1"><a class="reference internal" href="#introduction-of-release-package">2. Introduction of Release Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#sample-code-package">2.1. Sample Code Package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#prerequisites">3. Prerequisites</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prepare-the-dev-board">3.1. Prepare the Dev Board</a></li>
<li class="toctree-l2"><a class="reference internal" href="#compilation">3.2. Compilation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#how-to-use">4. How to Use</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basic-samples">4.1. Basic Samples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#quick-start">4.1.1. quick_start</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api-tutorial">4.1.2. API Tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="#advanced-samples">4.1.3. Advanced Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#miscellaneous-samples">4.1.4. Miscellaneous Samples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#helper-tools-and-frequently-used-operations">5. Helper Tools and Frequently-used Operations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#log">5.1. Log</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sample-log">5.1.1. Sample Log</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-dnn-log">5.1.2. The <code class="docutils literal notranslate"><span class="pre">dnn</span></code> Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#frequently-used-operations">5.2. Frequently-used Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#check-out-dev-board-s-image-version">5.2.1. Check out dev board’s image version</a></li>
<li class="toctree-l3"><a class="reference internal" href="#check-system-logs">5.2.2. Check system logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#check-bpu-utilization">5.2.3. Check BPU Utilization</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Basic Sample</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">1. </span>Foreword</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/basic-sample.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="foreword">
<h1><span class="section-number">1. </span>Foreword<a class="headerlink" href="#foreword" title="Permalink to this headline"></a></h1>
<p>The Basic Sample Package (hereafter as the BSP) is composed by samples in 3 categories:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dnn</span></code> API know-how samples.</p></li>
<li><p>Demonstrations of special features, e.g. custom OP etc.</p></li>
<li><p>Miscellaneous samples of Non-NV12 input model.</p></li>
</ol>
<p>The BSP makes it easy for developers to build their own applications.</p>
</section>
<section id="introduction-of-release-package">
<h1><span class="section-number">2. </span>Introduction of Release Package<a class="headerlink" href="#introduction-of-release-package" title="Permalink to this headline"></a></h1>
<p>​The BSP’s release package consists of the following:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>RELEASE PACKAGE</p></td>
<td><p>DESCRIPTIONS</p></td>
</tr>
<tr class="row-even"><td><p>horizon_runtime_sample</p></td>
<td><p>including sample code and scripts.</p></td>
</tr>
</tbody>
</table>
<section id="sample-code-package">
<h2><span class="section-number">2.1. </span>Sample Code Package<a class="headerlink" href="#sample-code-package" title="Permalink to this headline"></a></h2>
<p>​Directory of the BSP is shown as below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>+---horizon_runtime_sample
  ├── code                        <span class="c1"># source code of samples</span>
  │   ├── 00_quick_start          <span class="c1"># a quick-start single image inference sample using the MobileNetv1 model</span>
  │   │   ├── CMakeLists.txt
  │   │   └── src
  │   ├── 01_api_tutorial         <span class="c1"># dnn API sample code</span>
  │   │   ├── CMakeLists.txt
  │   │   ├── mem
  │   │   ├── model
  │   │   ├── resize
  │   │   └── tensor
  │   ├── 02_advanced_samples     <span class="c1"># special feature sample</span>
  │   │   ├── CMakeLists.txt
  │   │   ├── custom_identity
  │   │   └── multi_model_batch
  │   ├── 03_misc                 <span class="c1"># miscellaneous samples</span>
  │   │   ├── CMakeLists.txt
  │   │   ├── lenet_gray
  │   │   └── resnet_feature
  │   ├── build_xj3.sh             <span class="c1"># compilation script</span>
  │   ├── CMakeLists.txt
  │   └── deps                    <span class="c1"># compilation dependencies</span>
  │       └── aarch64
  ├── xj3
  │   ├── data                    <span class="c1"># preset data</span>
  │   │   ├── cls_images
  │   │   ├── det_images
  │   │   ├── misc_data
  │   ├── model
  │   │   └── README.md
  │   └── script                  <span class="c1"># scripts to run samples</span>
  │       ├── 00_quick_start
  │       ├── 01_api_tutorial
  │       ├── 02_advanced_samples
  │       ├── 03_misc
  │       ├── aarch64             <span class="c1"># compilation generated executables and dependencies</span>
  │       └── README.md
  └── README.md
</pre></div>
</div>
<ul class="simple">
<li><p>The <strong>00_quick_start</strong> folder contains a quick-start sample based on the <code class="docutils literal notranslate"><span class="pre">dnn</span></code> API.
This script inference a single image and parse the results using MobileNetv1.</p></li>
<li><p>The <strong>01_api_tutorial</strong> folder contains API teaching code, including 4 parts:
<strong>mem</strong>, <strong>model</strong>, <strong>resize</strong> and <strong>tensor</strong>.</p></li>
<li><p>The <strong>02_advanced_samples</strong> folder contains the sample that demonstrates the custom operator (CustomIdentity) feature.</p></li>
<li><p>The <strong>03_misc</strong> folder contains those miscellaneous samples of non-NV12 input models.</p></li>
<li><p>The <strong>xj3/</strong> folder contains scripts to run samples, preset data and related models.</p></li>
<li><p>The build_xj3.sh is a quick application compilation script.</p></li>
<li><p>The <strong>deps</strong> folder contains those sample code required third party dependencies.
Users can replace or delete depending on their own needs.</p></li>
<li><p>The <strong>tools</strong> folder contains the <code class="docutils literal notranslate"><span class="pre">hrt_bin_dump</span></code> and <code class="docutils literal notranslate"><span class="pre">hrt_model_exec</span></code> tools.</p></li>
</ul>
</section>
</section>
<section id="prerequisites">
<h1><span class="section-number">3. </span>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline"></a></h1>
<section id="prepare-the-dev-board">
<h2><span class="section-number">3.1. </span>Prepare the Dev Board<a class="headerlink" href="#prepare-the-dev-board" title="Permalink to this headline"></a></h2>
<ol class="arabic simple">
<li><p>Upgrade the system image to the BSP recommended version according to the upgrade instructions.</p></li>
<li><p>Ensure the connection between local dev machine and the dev board.</p></li>
</ol>
</section>
<section id="compilation">
<h2><span class="section-number">3.2. </span>Compilation<a class="headerlink" href="#compilation" title="Permalink to this headline"></a></h2>
<p>​Install the gcc-linaro-6.5.0-2018.12-x86_64_aarch64-linux-gnu cross-compilation tool
and perform the build_xj3.sh script in the <strong>horizon_runtime_sample/code</strong> folder to compile executable programs
in real machine environment. The executable program and corresponding dependencies will be copied into the
<strong>aarch64</strong> sub-folder in the <strong>xj3/script</strong> folder.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The default location of the cross-compilation tool specified by the build_xj3.sh script
is in the <strong>/opt</strong> sub-folder, if you wish to change the location,
please modify the build_xj3.sh script.</p>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">CC</span><span class="o">=</span>/opt/gcc-linaro-6.5.0-2018.12-x86_64_aarch64-linux-gnu/bin/aarch64-linux-gnu-gcc
<span class="nb">export</span> <span class="nv">CXX</span><span class="o">=</span>/opt/gcc-linaro-6.5.0-2018.12-x86_64_aarch64-linux-gnu/bin/aarch64-linux-gnu-g++
</pre></div>
</div>
</section>
</section>
<section id="how-to-use">
<h1><span class="section-number">4. </span>How to Use<a class="headerlink" href="#how-to-use" title="Permalink to this headline"></a></h1>
<section id="basic-samples">
<h2><span class="section-number">4.1. </span>Basic Samples<a class="headerlink" href="#basic-samples" title="Permalink to this headline"></a></h2>
<p>Sample scripts are in the <strong>xj3/script</strong> folder, the directory structure after compilation is as follows:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>script:
├── 00_quick_start
│   ├── README.md
│   └── run_mobilenetV1.sh
├── 01_api_tutorial
│   ├── model.sh
│   ├── README.md
│   ├── resize_bgr.sh
│   ├── resize_y.sh
│   ├── sys_mem.sh
│   └── tensor.sh
├── 02_advanced_samples
│   ├── custom_arm_op_custom_identity.sh
│   ├── README.md
│   └── run_multi_model_batch.sh
├── 03_misc
│   ├── README.md
│   ├── run_lenet.sh
│   └── run_resnet50_feature.sh
├── aarch64                                    <span class="c1"># compilation generated executables and dependencies</span>
│   ├── bin
│   │   ├── model_example
│   │   ├── resize_bgr_example
│   │   ├── resize_y_example
│   │   ├── run_custom_op
│   │   ├── run_lenet_gray
│   │   ├── run_mobileNetV1_224x224
│   │   ├── run_multi_model_batch
│   │   ├── run_resnet_feature
│   │   ├── sys_mem_example
│   │   └── tensor_example
│   └── lib
│       ├── libdnn.so
│       ├── libhbrt_bernoulli_aarch64.so
│       └── libopencv_world.so.3.4
└── README.md
</pre></div>
</div>
<section id="quick-start">
<h3><span class="section-number">4.1.1. </span>quick_start<a class="headerlink" href="#quick-start" title="Permalink to this headline"></a></h3>
<p>Refers to the quickstart sample in the <strong>00_quick_start</strong> directory.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>00_quick_start/
├── README.md
└── run_mobilenetV1.sh
</pre></div>
</div>
<ul class="simple">
<li><p>the run_mobilenetV1.sh script implements single-image inference sample using the MobileNetv1 model.</p></li>
</ul>
</section>
<section id="api-tutorial">
<h3><span class="section-number">4.1.2. </span>API Tutorial<a class="headerlink" href="#api-tutorial" title="Permalink to this headline"></a></h3>
<p>​The API tutorial refers to the samples in the <strong>01_api_tutorial</strong> folder.
These samples help developers understand how to use the embedded APIs.
This folder contains the following scripts:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>├── model.sh
├── resize_bgr.sh
├── resize_y.sh
├── sys_mem.sh
└── tensor.sh
</pre></div>
</div>
<ul>
<li><p>The model.sh script reads model information.
To run it, enter the <strong>01_api_tutorial</strong> and perform <code class="docutils literal notranslate"><span class="pre">sh</span> <span class="pre">model.sh</span></code>.
See below code block:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>

root@j3dvbj3-hynix2G-3200:/userdata/ruxin.song/xj3/script/01_api_tutorial# sh model.sh
../aarch64/bin/model_example --model_file_list<span class="o">=</span>../../model/runtime/mobilenetv1/mobilenetv1_nv12_hybrid_horizonrt.bin
I0000 <span class="m">00</span>:00:00.000000 <span class="m">24638</span> vlog_is_on.cc:197<span class="o">]</span> RAW: Set VLOG level <span class="k">for</span> <span class="s2">&quot;*&quot;</span> to <span class="m">3</span>
<span class="o">[</span>HBRT<span class="o">]</span> <span class="nb">set</span> log level as <span class="m">0</span>. <span class="nv">version</span> <span class="o">=</span> <span class="m">3</span>.12.1
<span class="o">[</span>BPU_PLAT<span class="o">]</span>BPU Platform Version<span class="o">(</span><span class="m">1</span>.2.2<span class="o">)</span>!
<span class="o">[</span>HorizonRT<span class="o">]</span> The model builder <span class="nv">version</span> <span class="o">=</span> <span class="m">1</span>.3.3
I0108 <span class="m">04</span>:19:27.245879 <span class="m">24638</span> model_example.cc:104<span class="o">]</span> model count:1, model<span class="o">[</span><span class="m">0</span><span class="o">]</span>: mobilenetv1_nv12
I0108 <span class="m">04</span>:19:27.246064 <span class="m">24638</span> model_example.cc:112<span class="o">]</span> hbDNNGetModelHandle <span class="o">[</span>mobilenetv1_nv12<span class="o">]</span> success!
I0108 <span class="m">04</span>:19:27.246139 <span class="m">24638</span> model_example.cc:189<span class="o">]</span> <span class="o">[</span>mobilenetv1_nv12<span class="o">]</span> Model Info:  input num: <span class="m">1</span>, input<span class="o">[</span><span class="m">0</span><span class="o">]</span> validShape: <span class="o">(</span> <span class="m">1</span>, <span class="m">3</span>, <span class="m">224</span>, <span class="m">224</span> <span class="o">)</span>, alignedShape: <span class="o">(</span> <span class="m">1</span>, <span class="m">4</span>, <span class="m">224</span>, <span class="m">224</span> <span class="o">)</span>, tensorLayout: <span class="m">2</span>, tensorType: <span class="m">1</span>, output num: <span class="m">1</span>, output<span class="o">[</span><span class="m">0</span><span class="o">]</span> validShape: <span class="o">(</span> <span class="m">1</span>, <span class="m">1000</span>, <span class="m">1</span>, <span class="m">1</span> <span class="o">)</span>, alignedShape: <span class="o">(</span> <span class="m">1</span>, <span class="m">1000</span>, <span class="m">1</span>, <span class="m">1</span> <span class="o">)</span>, tensorLayout: <span class="m">2</span>, tensorType: <span class="m">13</span>
</pre></div>
</div>
</li>
<li><p>The resize_bgr.sh script helps understand how to use the <code class="docutils literal notranslate"><span class="pre">hbDNNResize</span></code> API.
It crops the part of an 1352x900 image whose coordinates equal [5，19，340，343], resizes it into 402x416 and saves it.
To run it. enter the <strong>01_api_tutorial</strong> and perform <code class="docutils literal notranslate"><span class="pre">sh</span> <span class="pre">resize_bgr.sh</span></code>.
See below code block:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>

root@j3dvbj3-hynix2G-3200:/userdata/ruxin.song/xj3/script/01_api_tutorial# sh resize_bgr.sh
../aarch64/bin/resize_bgr_example --image_file<span class="o">=</span>../../data/det_images/kite.jpg --resize_height<span class="o">=</span><span class="m">416</span> --resize_width<span class="o">=</span><span class="m">402</span> --resized_image<span class="o">=</span>./resize_bgr.jpg --crop_x1<span class="o">=</span><span class="m">5</span> --crop_x2<span class="o">=</span><span class="m">340</span> --crop_y1<span class="o">=</span><span class="m">19</span> --crop_y2<span class="o">=</span><span class="m">343</span>
I0000 <span class="m">00</span>:00:00.000000 <span class="m">24975</span> vlog_is_on.cc:197<span class="o">]</span> RAW: Set VLOG level <span class="k">for</span> <span class="s2">&quot;*&quot;</span> to <span class="m">3</span>
I0108 <span class="m">06</span>:58:03.327212 <span class="m">24975</span> resize_bgr_example.cc:116<span class="o">]</span> Original shape: 1352x900 ,dest shape:402x416 ,aligned shape:402x416
<span class="o">[</span>HBRT<span class="o">]</span> <span class="nb">set</span> log level as <span class="m">0</span>. <span class="nv">version</span> <span class="o">=</span> <span class="m">3</span>.12.1
<span class="o">[</span>BPU_PLAT<span class="o">]</span>BPU Platform Version<span class="o">(</span><span class="m">1</span>.2.2<span class="o">)</span>!
I0108 <span class="m">06</span>:58:03.328739 <span class="m">24975</span> resize_bgr_example.cc:139<span class="o">]</span> resize success!
I0108 <span class="m">06</span>:58:03.335835 <span class="m">24975</span> resize_bgr_example.cc:143<span class="o">]</span> <span class="nb">wait</span> task <span class="k">done</span> finished!
</pre></div>
</div>
</li>
</ul>
<p>After successful execution, an image named resize_bgr.jpg should be saved into the current path.</p>
<ul>
<li><p>The resize_y.sh script helps understand how to use the <code class="docutils literal notranslate"><span class="pre">hbDNNResize</span></code> API.
It resizes an image into 416x402. To run it, enter the  <strong>01_api_tutorial</strong> folder and perform  <code class="docutils literal notranslate"><span class="pre">sh</span> <span class="pre">resize_y.sh</span></code>.
See below code block:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>

root@j3dvbj3-hynix2G-3200:/userdata/ruxin.song/xj3/script/01_api_tutorial# sh resize_y.sh
../aarch64/bin/resize_y_example --image_file<span class="o">=</span>../../data/det_images/kite.jpg --resize_height<span class="o">=</span><span class="m">416</span> --resize_width<span class="o">=</span><span class="m">402</span> --resized_image<span class="o">=</span>./resize_y.jpg
I0000 <span class="m">00</span>:00:00.000000 <span class="m">24992</span> vlog_is_on.cc:197<span class="o">]</span> RAW: Set VLOG level <span class="k">for</span> <span class="s2">&quot;*&quot;</span> to <span class="m">3</span>
I0108 <span class="m">06</span>:59:36.887241 <span class="m">24992</span> resize_y_example.cc:101<span class="o">]</span> Original shape: 1352x900 ,dest shape:402x416 ,aligned shape:402x416
<span class="o">[</span>HBRT<span class="o">]</span> <span class="nb">set</span> log level as <span class="m">0</span>. <span class="nv">version</span> <span class="o">=</span> <span class="m">3</span>.12.1
<span class="o">[</span>BPU_PLAT<span class="o">]</span>BPU Platform Version<span class="o">(</span><span class="m">1</span>.2.2<span class="o">)</span>!
I0108 <span class="m">06</span>:59:36.888770 <span class="m">24992</span> resize_y_example.cc:119<span class="o">]</span> resize success
I0108 <span class="m">06</span>:59:36.891711 <span class="m">24992</span> resize_y_example.cc:123<span class="o">]</span> <span class="nb">wait</span> resize success
I0108 <span class="m">06</span>:59:36.891798 <span class="m">24992</span> resize_y_example.cc:129<span class="o">]</span> spent time: <span class="m">0</span>.003463
</pre></div>
</div>
</li>
</ul>
<p>After successful execution, an image named resize_y.jpg should be saved into the current path.</p>
<ul>
<li><p>The sys_mem.sh script helps understand how to use the <code class="docutils literal notranslate"><span class="pre">hbSysAllocMem</span></code>, <code class="docutils literal notranslate"><span class="pre">hbSysFlushMem</span></code> and <code class="docutils literal notranslate"><span class="pre">hbSysFreeMem</span></code> APIs.
To run it, enter the <strong>01_api_tutorial</strong> folder and perform <code class="docutils literal notranslate"><span class="pre">sh</span> <span class="pre">sys_mem.sh</span></code>.</p></li>
<li><p>The tensor.sh script helps understand how to prepare model input and output tensors.
To run it, enter the <strong>01_api_tutorial</strong> folder and perform <code class="docutils literal notranslate"><span class="pre">sh</span> <span class="pre">tensor.sh</span></code>.
See below code block:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@j3dvbj3-hynix2G-3200:/userdata/ruxin.song/xj3/script/01_api_tutorial# sh tensor.sh
Tensor data type:0, Tensor layout: <span class="m">2</span>, shape:1x1x721x1836, aligned shape:1x1x721x1840
Tensor data type:1, Tensor layout: <span class="m">2</span>, shape:1x3x773x329, aligned shape:1x3x773x336
Tensor data type:2, Tensor layout: <span class="m">2</span>, shape:1x3x108x1297, aligned shape:1x3x108x1312
Tensor data type:5, Tensor layout: <span class="m">2</span>, shape:1x3x858x477, aligned shape:1x3x858x477
Tensor data type:5, Tensor layout: <span class="m">0</span>, shape:1x920x102x3, aligned shape:1x920x102x3
Tensor data type:4, Tensor layout: <span class="m">2</span>, shape:1x3x723x1486, aligned shape:1x3x723x1486
Tensor data type:4, Tensor layout: <span class="m">0</span>, shape:1x372x366x3, aligned shape:1x372x366x3
Tensor data type:3, Tensor layout: <span class="m">2</span>, shape:1x3x886x291, aligned shape:1x3x886x291
Tensor data type:3, Tensor layout: <span class="m">0</span>, shape:1x613x507x3, aligned shape:1x613x507x3
</pre></div>
</div>
</li>
</ul>
</section>
<section id="advanced-samples">
<h3><span class="section-number">4.1.3. </span>Advanced Samples<a class="headerlink" href="#advanced-samples" title="Permalink to this headline"></a></h3>
<p>The advanced samples refers to those samples in the <strong>02_advanced_samples</strong> folder
and they are used for demonstrating how to use the custom OP special feature.
The folder contains below scripts:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>├── custom_arm_op_custom_identity.sh
└── run_multi_model_batch.sh
</pre></div>
</div>
<ul>
<li><p>The custom_arm_op_custom_identity.sh script implement model inference using user customized operator.
To run it, enter the <strong>02_advanced_samples</strong> folder and perform <code class="docutils literal notranslate"><span class="pre">sh</span> <span class="pre">custom_arm_op_custom_identity.sh</span></code>.
See below code block:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@j3dvbj3-hynix2G-3200:/userdata/ruxin.song/xj3/script/02_advanced_samples# sh custom_arm_op_custom_identity.sh
../aarch64/bin/run_custom_op --model_file<span class="o">=</span>../../model/runtime/googlenet_cop/googlenet_cop_224x224_nv12.bin --image_file<span class="o">=</span>../../data/cls_images/zebra_cls.jpg --image_height<span class="o">=</span><span class="m">224</span> --image_width<span class="o">=</span><span class="m">224</span> --top_k<span class="o">=</span><span class="m">5</span>
I0000 <span class="m">00</span>:00:00.000000 <span class="m">25036</span> vlog_is_on.cc:197<span class="o">]</span> RAW: Set VLOG level <span class="k">for</span> <span class="s2">&quot;*&quot;</span> to <span class="m">3</span>
I0108 <span class="m">07</span>:04:16.743277 <span class="m">25036</span> main.cpp:138<span class="o">]</span> hbDNNRegisterLayerCreator success
<span class="o">[</span>HBRT<span class="o">]</span> <span class="nb">set</span> log level as <span class="m">0</span>. <span class="nv">version</span> <span class="o">=</span> <span class="m">3</span>.12.1
<span class="o">[</span>BPU_PLAT<span class="o">]</span>BPU Platform Version<span class="o">(</span><span class="m">1</span>.2.2<span class="o">)</span>!
<span class="o">[</span>HorizonRT<span class="o">]</span> The model builder <span class="nv">version</span> <span class="o">=</span> <span class="m">1</span>.3.4
I0108 <span class="m">07</span>:04:16.902737 <span class="m">25036</span> main.cpp:153<span class="o">]</span> hbDNNGetModelNameList success
I0108 <span class="m">07</span>:04:16.902809 <span class="m">25036</span> main.cpp:160<span class="o">]</span> hbDNNGetModelHandle success
I0108 <span class="m">07</span>:04:16.920487 <span class="m">25036</span> main.cpp:169<span class="o">]</span> <span class="nb">read</span> image to nv12 success
I0108 <span class="m">07</span>:04:16.920793 <span class="m">25036</span> main.cpp:179<span class="o">]</span> prepare nv12 tensor success
I0108 <span class="m">07</span>:04:16.920900 <span class="m">25036</span> main.cpp:189<span class="o">]</span> prepare tensor success
I0108 <span class="m">07</span>:04:16.922179 <span class="m">25036</span> main.cpp:200<span class="o">]</span> hbDNNInfer success
I0108 <span class="m">07</span>:04:16.996123 <span class="m">25036</span> main.cpp:205<span class="o">]</span> task <span class="k">done</span>
I0108 <span class="m">07</span>:04:16.996308 <span class="m">25036</span> main.cpp:210<span class="o">]</span> task post process success
I0108 <span class="m">07</span>:04:16.996355 <span class="m">25036</span> main.cpp:217<span class="o">]</span> TOP <span class="m">0</span> result id: <span class="m">340</span>
I0108 <span class="m">07</span>:04:16.996380 <span class="m">25036</span> main.cpp:217<span class="o">]</span> TOP <span class="m">1</span> result id: <span class="m">351</span>
I0108 <span class="m">07</span>:04:16.996403 <span class="m">25036</span> main.cpp:217<span class="o">]</span> TOP <span class="m">2</span> result id: <span class="m">83</span>
I0108 <span class="m">07</span>:04:16.996426 <span class="m">25036</span> main.cpp:217<span class="o">]</span> TOP <span class="m">3</span> result id: <span class="m">352</span>
I0108 <span class="m">07</span>:04:16.996448 <span class="m">25036</span> main.cpp:217<span class="o">]</span> TOP <span class="m">4</span> result id: <span class="m">353</span>
</pre></div>
</div>
</li>
<li><p>The run_multi_model_batch.sh script implements the feature of inferencing multiple small models by the batch.
Enter the <strong>02_advanced_samples</strong> directory and run <code class="docutils literal notranslate"><span class="pre">sh</span> <span class="pre">run_multi_model_batch.sh</span></code> command as shown in below code block:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@x3sdbx3-hynix2G-3200:/userdata/chaoliang/xj3/script/02_advanced_samples# sh run_multi_model_batch.sh
../aarch64/bin/run_multi_model_batch --model_file<span class="o">=</span>../../model/runtime/googlenet/googlenet_224x224_nv12.bin,../../model/runtime/mobilenetv2/mobilenetv2_224x224_nv12.bin --input_file<span class="o">=</span>../../data/cls_images/zebra_cls.jpg,../../data/cls_images/zebra_cls.jpg
I0000 <span class="m">00</span>:00:00.000000 <span class="m">17060</span> vlog_is_on.cc:197<span class="o">]</span> RAW: Set VLOG level <span class="k">for</span> <span class="s2">&quot;*&quot;</span> to <span class="m">3</span>
<span class="o">[</span>HBRT<span class="o">]</span> <span class="nb">set</span> log level as <span class="m">0</span>. <span class="nv">version</span> <span class="o">=</span> <span class="m">3</span>.13.4
<span class="o">[</span>BPU_PLAT<span class="o">]</span>BPU Platform Version<span class="o">(</span><span class="m">1</span>.1.1<span class="o">)</span>!
<span class="o">[</span>HorizonRT<span class="o">]</span> The model builder <span class="nv">version</span> <span class="o">=</span> <span class="m">1</span>.3.18
<span class="o">[</span>HorizonRT<span class="o">]</span> The model builder <span class="nv">version</span> <span class="o">=</span> <span class="m">1</span>.3.18
I0317 <span class="m">12</span>:37:18.249785 <span class="m">17060</span> main.cpp:119<span class="o">]</span> hbDNNInitializeFromFiles success
I0317 <span class="m">12</span>:37:18.250029 <span class="m">17060</span> main.cpp:127<span class="o">]</span> hbDNNGetModelNameList success
I0317 <span class="m">12</span>:37:18.250071 <span class="m">17060</span> main.cpp:141<span class="o">]</span> hbDNNGetModelHandle success
I0317 <span class="m">12</span>:37:18.283633 <span class="m">17060</span> main.cpp:155<span class="o">]</span> <span class="nb">read</span> image to nv12 success
I0317 <span class="m">12</span>:37:18.284270 <span class="m">17060</span> main.cpp:172<span class="o">]</span> prepare input tensor success
I0317 <span class="m">12</span>:37:18.284456 <span class="m">17060</span> main.cpp:184<span class="o">]</span> prepare output tensor success
I0317 <span class="m">12</span>:37:18.285344 <span class="m">17060</span> main.cpp:218<span class="o">]</span> infer success
I0317 <span class="m">12</span>:37:18.296559 <span class="m">17060</span> main.cpp:223<span class="o">]</span> task <span class="k">done</span>
I0317 <span class="m">12</span>:37:18.296701 <span class="m">17060</span> main.cpp:228<span class="o">]</span> googlenet class result id: <span class="m">340</span>
I0317 <span class="m">12</span>:37:18.296805 <span class="m">17060</span> main.cpp:232<span class="o">]</span> mobilenetv2 class result id: <span class="m">340</span>
I0317 <span class="m">12</span>:37:18.296887 <span class="m">17060</span> main.cpp:236<span class="o">]</span> release task success
</pre></div>
</div>
</li>
</ul>
</section>
<section id="miscellaneous-samples">
<h3><span class="section-number">4.1.4. </span>Miscellaneous Samples<a class="headerlink" href="#miscellaneous-samples" title="Permalink to this headline"></a></h3>
<p>The miscellaneous samples refers to the sample in the <strong>03_misc</strong> folder.
They are used for demonstrating how to use the non-NV12 input models.
It contains below scripts:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>├── run_lenet.sh
└── run_resnet50_feature.sh
</pre></div>
</div>
<ul>
<li><p>The run_lenet.sh is used for implementing Lenet model inference using Y data input.
To run it, enter the <strong>03_misc</strong> folder and perform <code class="docutils literal notranslate"><span class="pre">sh</span> <span class="pre">run_lenet.sh</span></code> .
See below code block:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@j3dvbj3-hynix2G-3200:/userdata/ruxin.song/xj3/script/03_misc# sh run_lenet.sh
../aarch64/bin/run_lenet_gray --model_file<span class="o">=</span>../../model/runtime/lenet_gray/lenet_gray_hybrid_horizonrt.bin --data_file<span class="o">=</span>../../data/misc_data/7.bin --image_height<span class="o">=</span><span class="m">28</span> --image_width<span class="o">=</span><span class="m">28</span> --top_k<span class="o">=</span><span class="m">5</span>
I0000 <span class="m">00</span>:00:00.000000 <span class="m">25139</span> vlog_is_on.cc:197<span class="o">]</span> RAW: Set VLOG level <span class="k">for</span> <span class="s2">&quot;*&quot;</span> to <span class="m">3</span>
<span class="o">[</span>HBRT<span class="o">]</span> <span class="nb">set</span> log level as <span class="m">0</span>. <span class="nv">version</span> <span class="o">=</span> <span class="m">3</span>.12.1
<span class="o">[</span>BPU_PLAT<span class="o">]</span>BPU Platform Version<span class="o">(</span><span class="m">1</span>.2.2<span class="o">)</span>!
<span class="o">[</span>HorizonRT<span class="o">]</span> The model builder <span class="nv">version</span> <span class="o">=</span> <span class="m">1</span>.3.3
I0108 <span class="m">07</span>:23:35.507514 <span class="m">25139</span> run_lenet_gray.cc:145<span class="o">]</span> hbDNNInitializeFromFiles success
I0108 <span class="m">07</span>:23:35.507737 <span class="m">25139</span> run_lenet_gray.cc:153<span class="o">]</span> hbDNNGetModelNameList success
I0108 <span class="m">07</span>:23:35.507771 <span class="m">25139</span> run_lenet_gray.cc:160<span class="o">]</span> hbDNNGetModelHandle success
I0108 <span class="m">07</span>:23:35.508070 <span class="m">25139</span> run_lenet_gray.cc:176<span class="o">]</span> prepare y tensor success
I0108 <span class="m">07</span>:23:35.508178 <span class="m">25139</span> run_lenet_gray.cc:189<span class="o">]</span> prepare tensor success
I0108 <span class="m">07</span>:23:35.509909 <span class="m">25139</span> run_lenet_gray.cc:200<span class="o">]</span> infer success
I0108 <span class="m">07</span>:23:35.510721 <span class="m">25139</span> run_lenet_gray.cc:205<span class="o">]</span> task <span class="k">done</span>
I0108 <span class="m">07</span>:23:35.510790 <span class="m">25139</span> run_lenet_gray.cc:210<span class="o">]</span> task post process finished
I0108 <span class="m">07</span>:23:35.510832 <span class="m">25139</span> run_lenet_gray.cc:217<span class="o">]</span> TOP <span class="m">0</span> result id: <span class="m">7</span>
I0108 <span class="m">07</span>:23:35.510857 <span class="m">25139</span> run_lenet_gray.cc:217<span class="o">]</span> TOP <span class="m">1</span> result id: <span class="m">9</span>
I0108 <span class="m">07</span>:23:35.510879 <span class="m">25139</span> run_lenet_gray.cc:217<span class="o">]</span> TOP <span class="m">2</span> result id: <span class="m">3</span>
I0108 <span class="m">07</span>:23:35.510903 <span class="m">25139</span> run_lenet_gray.cc:217<span class="o">]</span> TOP <span class="m">3</span> result id: <span class="m">4</span>
I0108 <span class="m">07</span>:23:35.510927 <span class="m">25139</span> run_lenet_gray.cc:217<span class="o">]</span> TOP <span class="m">4</span> result id: <span class="m">2</span>
</pre></div>
</div>
</li>
<li><p>The run_resnet50_feature.sh script implements resnet50 model inference using feature input.
When using it, enter the <strong>03_misc</strong> directory then run <code class="docutils literal notranslate"><span class="pre">sh</span> <span class="pre">run_resnet50_feature.sh</span></code>.
The output is shown as below:</p>
<blockquote>
<div><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@j3dvbj3-hynix2G-3200:/userdata/ruxin.song/xj3/script/03_misc# sh run_resnet50_feature.sh
../aarch64/bin/run_resnet_feature --model_file<span class="o">=</span>../../model/runtime/resnet50_feature/resnet50_feature_hybrid_horizonrt.bin --data_file<span class="o">=</span>../../data/misc_data/np_0 --top_k<span class="o">=</span><span class="m">5</span>
I0000 <span class="m">00</span>:00:00.000000 <span class="m">25155</span> vlog_is_on.cc:197<span class="o">]</span> RAW: Set VLOG level <span class="k">for</span> <span class="s2">&quot;*&quot;</span> to <span class="m">3</span>
<span class="o">[</span>HBRT<span class="o">]</span> <span class="nb">set</span> log level as <span class="m">0</span>. <span class="nv">version</span> <span class="o">=</span> <span class="m">3</span>.12.1
<span class="o">[</span>BPU_PLAT<span class="o">]</span>BPU Platform Version<span class="o">(</span><span class="m">1</span>.2.2<span class="o">)</span>!
<span class="o">[</span>HorizonRT<span class="o">]</span> The model builder <span class="nv">version</span> <span class="o">=</span> <span class="m">1</span>.3.3
I0108 <span class="m">07</span>:25:41.300466 <span class="m">25155</span> run_resnet_feature.cc:136<span class="o">]</span> hbDNNInitializeFromFiles success
I0108 <span class="m">07</span>:25:41.300708 <span class="m">25155</span> run_resnet_feature.cc:144<span class="o">]</span> hbDNNGetModelNameList success
I0108 <span class="m">07</span>:25:41.300741 <span class="m">25155</span> run_resnet_feature.cc:151<span class="o">]</span> hbDNNGetModelHandle success
I0108 <span class="m">07</span>:25:41.302760 <span class="m">25155</span> run_resnet_feature.cc:166<span class="o">]</span> prepare feature tensor success
I0108 <span class="m">07</span>:25:41.302919 <span class="m">25155</span> run_resnet_feature.cc:176<span class="o">]</span> prepare tensor success
I0108 <span class="m">07</span>:25:41.304678 <span class="m">25155</span> run_resnet_feature.cc:187<span class="o">]</span> infer success
I0108 <span class="m">07</span>:25:41.373052 <span class="m">25155</span> run_resnet_feature.cc:192<span class="o">]</span> task <span class="k">done</span>
I0108 <span class="m">07</span>:25:41.373328 <span class="m">25155</span> run_resnet_feature.cc:197<span class="o">]</span> task post process finished
I0108 <span class="m">07</span>:25:41.373374 <span class="m">25155</span> run_resnet_feature.cc:204<span class="o">]</span> TOP <span class="m">0</span> result id: <span class="m">74</span>
I0108 <span class="m">07</span>:25:41.373399 <span class="m">25155</span> run_resnet_feature.cc:204<span class="o">]</span> TOP <span class="m">1</span> result id: <span class="m">815</span>
I0108 <span class="m">07</span>:25:41.373422 <span class="m">25155</span> run_resnet_feature.cc:204<span class="o">]</span> TOP <span class="m">2</span> result id: <span class="m">73</span>
I0108 <span class="m">07</span>:25:41.373445 <span class="m">25155</span> run_resnet_feature.cc:204<span class="o">]</span> TOP <span class="m">3</span> result id: <span class="m">78</span>
I0108 <span class="m">07</span>:25:41.373468 <span class="m">25155</span> run_resnet_feature.cc:204<span class="o">]</span> TOP <span class="m">4</span> result id: <span class="m">72</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
</section>
</section>
<section id="helper-tools-and-frequently-used-operations">
<h1><span class="section-number">5. </span>Helper Tools and Frequently-used Operations<a class="headerlink" href="#helper-tools-and-frequently-used-operations" title="Permalink to this headline"></a></h1>
<section id="log">
<h2><span class="section-number">5.1. </span>Log<a class="headerlink" href="#log" title="Permalink to this headline"></a></h2>
<p>There are 2 types of logs: <strong>sample log</strong> and <strong>dnn log</strong>.
Wherein, sample log refers to the log in the BSP release package;
while dnn log refers to the log in the embedded dnn library.
Developers can specify logs according to their own needs.</p>
<section id="sample-log">
<h3><span class="section-number">5.1.1. </span>Sample Log<a class="headerlink" href="#sample-log" title="Permalink to this headline"></a></h3>
<p>Sample log uses the VLOG of glog. all logs of basic_samples related samples are dumped.</p>
</section>
<section id="the-dnn-log">
<h3><span class="section-number">5.1.2. </span>The <code class="docutils literal notranslate"><span class="pre">dnn</span></code> Log<a class="headerlink" href="#the-dnn-log" title="Permalink to this headline"></a></h3>
<ol class="arabic">
<li><p>Log levels. Logs in the <code class="docutils literal notranslate"><span class="pre">dnn</span></code> are composed by 4 levels:</p>
<ul class="simple">
<li><p>When <code class="docutils literal notranslate"><span class="pre">HB_DNN_LOG_NONE</span> <span class="pre">=</span> <span class="pre">0</span></code>, no log will be printed；</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">HB_DNN_LOG_WARNING</span> <span class="pre">=</span> <span class="pre">3</span></code>, warning information will be printed;</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">HB_DNN_LOG_ERROR</span> <span class="pre">=</span> <span class="pre">4</span></code>, error information will be printed;</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">HB_DNN_LOG_FATAL</span> <span class="pre">=</span> <span class="pre">5</span></code>, those errors which can cause quit will be printed.</p></li>
</ul>
</li>
<li><p>Rules to set log levels:</p>
<p>If a log event whose level is higher than your specified log level takes place, then it will be printed, otherwise blocked.
That is to say, the lower level you specify, the more (levels of) logs you are going to get
(except for level <code class="docutils literal notranslate"><span class="pre">0</span></code>, which means print nothing).
E.g., if you specify log level as <code class="docutils literal notranslate"><span class="pre">3</span></code> (i.e. <code class="docutils literal notranslate"><span class="pre">WARNING</span></code>), then level <code class="docutils literal notranslate"><span class="pre">3</span></code>, <code class="docutils literal notranslate"><span class="pre">4</span></code> and <code class="docutils literal notranslate"><span class="pre">5</span></code> logs will be printed.
The default log level is <code class="docutils literal notranslate"><span class="pre">HB_DNN_LOG_WARNING</span></code>, i.e., <code class="docutils literal notranslate"><span class="pre">WARNING</span></code> , <code class="docutils literal notranslate"><span class="pre">ERROR</span></code> and <code class="docutils literal notranslate"><span class="pre">FATAL</span></code> logs will be printed.</p>
</li>
<li><p>Specify log level.
Use the environment variable <code class="docutils literal notranslate"><span class="pre">HB_DNN_LOG_LEVEL</span></code> to specify log level.
E.g. if <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">HB_DNN_LOG_LEVEL=3</span></code>, then all logs whose level are superior to and equal to <code class="docutils literal notranslate"><span class="pre">WARNING</span></code> will be printed.</p></li>
</ol>
</section>
</section>
<section id="frequently-used-operations">
<h2><span class="section-number">5.2. </span>Frequently-used Operations<a class="headerlink" href="#frequently-used-operations" title="Permalink to this headline"></a></h2>
<section id="check-out-dev-board-s-image-version">
<h3><span class="section-number">5.2.1. </span>Check out dev board’s image version<a class="headerlink" href="#check-out-dev-board-s-image-version" title="Permalink to this headline"></a></h3>
<p>​Run <code class="docutils literal notranslate"><span class="pre">uname</span> <span class="pre">-a</span></code> to check system version, the console shall dump below code block:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@j3dvbj3-hynix2G-3200:/userdata/ruxin.song/xj3/script/02_advanced_samples/plugin# uname -a
Linux j3dvbj3-hynix2G-3200 <span class="m">4</span>.14.74 <span class="c1">#8 SMP PREEMPT Wed Mar 3 11:31:24 CST 2021 aarch64 GNU/Linux</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SMP</span></code> indicates that the system can support Symmetrical Multi-Processing.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PREEMPT</span></code> indicates that the system can support preemption core.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Wed</span> <span class="pre">Mar</span> <span class="pre">3</span> <span class="pre">11:31:24</span> <span class="pre">CST</span> <span class="pre">2021</span></code> represents release time of the system image.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aarch64</span></code> indicates that the aarch64 platform is used.</p></li>
</ul>
</div>
</section>
<section id="check-system-logs">
<h3><span class="section-number">5.2.2. </span>Check system logs<a class="headerlink" href="#check-system-logs" title="Permalink to this headline"></a></h3>
<p>Run <code class="docutils literal notranslate"><span class="pre">dmesg</span></code> to check system logs, as shown in below code block:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@x3dvbx3-micron1G-3200:/userdata# dmesg
<span class="o">[</span>    <span class="m">0</span>.000000<span class="o">]</span> Booting Linux on physical CPU 0x0
<span class="o">[</span>    <span class="m">0</span>.000000<span class="o">]</span> Linux version <span class="m">4</span>.14.74 <span class="o">(</span>jenkins@sysgbj8<span class="o">)</span> <span class="o">(</span>gcc version <span class="m">6</span>.5.0 <span class="o">(</span>Linaro GCC <span class="m">6</span>.5-2018.12<span class="o">))</span> <span class="c1">#2 SMP PREEMPT Fri Oct 23 10:47:39 CST 2020</span>
<span class="o">[</span>    <span class="m">0</span>.000000<span class="o">]</span> Boot CPU: AArch64 Processor <span class="o">[</span>410fd034<span class="o">]</span>
<span class="o">[</span>    <span class="m">0</span>.000000<span class="o">]</span> Machine model: Hobot X3 SOC MP DVB
<span class="o">[</span>    <span class="m">0</span>.000000<span class="o">]</span> earlycon: hobot0 at MMIO 0x00000000a5000000 <span class="o">(</span>options <span class="s1">&#39;&#39;</span><span class="o">)</span>
<span class="o">[</span>    <span class="m">0</span>.000000<span class="o">]</span> bootconsole <span class="o">[</span>hobot0<span class="o">]</span> enabled
...
</pre></div>
</div>
<p>If system failure (e.g. the program is killed or mem allocation failed) takes place when
running programs in dev board, run <code class="docutils literal notranslate"><span class="pre">dmesg</span></code> to see the cause of system failure.</p>
</section>
<section id="check-bpu-utilization">
<h3><span class="section-number">5.2.3. </span>Check BPU Utilization<a class="headerlink" href="#check-bpu-utilization" title="Permalink to this headline"></a></h3>
<p>Run <code class="docutils literal notranslate"><span class="pre">hrut_somstatus</span></code> to check existing BPU utilization of dev board. The output are shown in below code block:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">=====================</span><span class="nv">1</span><span class="o">=====================</span>
temperature--&gt;
  BOARD    : <span class="m">31</span>.5 <span class="o">(</span>C<span class="o">)</span>
  CPU      : <span class="m">33</span>.7 <span class="o">(</span>C<span class="o">)</span>
cpu frequency--&gt;
        min       cur     max
  cpu0: <span class="m">240000</span>        <span class="m">1200000</span> <span class="m">1200000</span>
  cpu1: <span class="m">240000</span>        <span class="m">1200000</span> <span class="m">1200000</span>
  cpu2: <span class="m">240000</span>        <span class="m">1200000</span> <span class="m">1200000</span>
  cpu3: <span class="m">240000</span>        <span class="m">1200000</span> <span class="m">1200000</span>
bpu status information----&gt;
        min         cur       max       ratio
  bpu0: <span class="m">400000000</span>     <span class="m">1000000000</span>      <span class="m">1000000000</span>      <span class="m">0</span>      // utilization rate of BPU core <span class="m">0</span>
  bpu1: <span class="m">400000000</span>     <span class="m">1000000000</span>      <span class="m">1000000000</span>      <span class="m">0</span>      // utilization rate of BPU core <span class="m">1</span>
root@x3dvbx3-micron1G-3200:~#
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Basic Sample User Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Horizon Robotics.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>