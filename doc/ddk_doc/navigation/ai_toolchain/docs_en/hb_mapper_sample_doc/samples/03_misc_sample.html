<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3. Other Samples &mdash; horizon_model_convert_sample_documentation v1.12.3 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom-style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="2. Algorithm Model Samples" href="02_algorithm_sample.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> horizon_model_convert_sample_documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="01_general_descriptions.html">1. General Descriptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_algorithm_sample.html">2. Algorithm Model Samples</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Other Samples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#how-to-use">3.1. How to Use</a></li>
<li class="toctree-l2"><a class="reference internal" href="#miscellaneous-samples">3.2. Miscellaneous Samples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lenet-gray">3.2.1. lenet_gray</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#directory">3.2.1.1. Directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#description">3.2.1.2. Description</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#resnet50-feature">3.2.2. resnet50_feature</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">3.2.2.1. Directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">3.2.2.2. Description</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vector-diff">3.2.3. vector-diff</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">3.2.3.1. Directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#output-list">3.2.3.2. Output List</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#multi-input-example">3.2.4. multi_input_example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">3.2.4.1. Directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">3.2.4.2. Description</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#model-verifier">3.2.5. model_verifier</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id6">3.2.5.1. Directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id7">3.2.5.2. Description</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#model-info">3.2.6. model_info</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id8">3.2.6.1. Directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">3.2.6.2. Description</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#mobilenet-bgr">3.2.7. mobilenet_bgr</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id10">3.2.7.1. Directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">3.2.7.2. Description</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#mobilenet-yuv444">3.2.8. mobilenet_yuv444</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id12">3.2.8.1. Directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13">3.2.8.2. Description</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#user-custom-op-sample">3.3. User Custom OP Sample</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id14">3.3.1. Directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">3.3.2. Description</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">horizon_model_convert_sample_documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">3. </span>Other Samples</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/samples/03_misc_sample.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="other-samples">
<h1><span class="section-number">3. </span>Other Samples<a class="headerlink" href="#other-samples" title="Permalink to this headline"></a></h1>
<p>Other samples refer to the samples in the 05_miscellaneous/ and 06_custom_op/ folders.
Amongst, the 05_miscellaneous/ folder contains miscellaneous samples used for other features in the X3 Toolchain,
e.g. how to enable the RGB data trained model receives YUV data at Runtime using Horizon’s model conversion Toolchain.
The 06_custom_op/ folder is a user custom OP sample helps developers understand how to add custom OP when there are Toolchain
unsupported OPs.</p>
<p>Usages and directories of the above mentioned samples please refer to below contents.</p>
<section id="how-to-use">
<h2><span class="section-number">3.1. </span>How to Use<a class="headerlink" href="#how-to-use" title="Permalink to this headline"></a></h2>
<p>Each sample is encapsulated into a shell script in order.
Run shell scripts in order to understand usage of corresponding tools, API features and usage etc.</p>
</section>
<section id="miscellaneous-samples">
<h2><span class="section-number">3.2. </span>Miscellaneous Samples<a class="headerlink" href="#miscellaneous-samples" title="Permalink to this headline"></a></h2>
<section id="lenet-gray">
<h3><span class="section-number">3.2.1. </span>lenet_gray<a class="headerlink" href="#lenet-gray" title="Permalink to this headline"></a></h3>
<section id="directory">
<h4><span class="section-number">3.2.1.1. </span>Directory<a class="headerlink" href="#directory" title="Permalink to this headline"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>01_lenet_gray/
    .
    └── mapper
        ├── 01_check.sh                 // check model validity
        ├── 02_get_mnist.sh             // obtain the calibration dataset
        ├── 03_build.sh                 // convert the debugging model
        ├── 04_inference.sh             // run inference using the onnx runtime
        ├── README.cn.md
        ├── lenet_gray_config.yaml
        ├── postprocess.py
        ├── preprocess.py
        └── process_mnist.py
</pre></div>
</div>
</section>
<section id="description">
<h4><span class="section-number">3.2.1.2. </span>Description<a class="headerlink" href="#description" title="Permalink to this headline"></a></h4>
<p>This section contains model conversion, simulator runtime and on-board runtime samples of gray image models.</p>
</section>
</section>
<section id="resnet50-feature">
<h3><span class="section-number">3.2.2. </span>resnet50_feature<a class="headerlink" href="#resnet50-feature" title="Permalink to this headline"></a></h3>
<section id="id1">
<h4><span class="section-number">3.2.2.1. </span>Directory<a class="headerlink" href="#id1" title="Permalink to this headline"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>02_resnet50_feature
    .
    └── mapper
        ├── 01_check.sh                 // check model validity
        ├── 02_build.sh                 // convert the debugging model
        ├── 03_inference.sh             // run inference using the onnx runtime
        ├── inference.py
        ├── README.cn.md
        └── resnet50_feature_config.yaml
</pre></div>
</div>
</section>
<section id="id2">
<h4><span class="section-number">3.2.2.2. </span>Description<a class="headerlink" href="#id2" title="Permalink to this headline"></a></h4>
<p>This section contains model conversion, simulator runtime and on-board runtime samples of resnet50_feature.</p>
</section>
</section>
<section id="vector-diff">
<h3><span class="section-number">3.2.3. </span>vector-diff<a class="headerlink" href="#vector-diff" title="Permalink to this headline"></a></h3>
<section id="id3">
<h4><span class="section-number">3.2.3.1. </span>Directory<a class="headerlink" href="#id3" title="Permalink to this headline"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>03_vector_diff
.
└── mobilenet_mapper
    ├── 01_inference_rt.sh
    ├── 02_vec_diff.sh                  // analyze output data using the vec_diff tool
    ├── aarch64_x86_xj3
    <span class="p">|</span>   ├── bin
    <span class="p">|</span>   <span class="p">|</span>   ├── hrt_bin_dump
    <span class="p">|</span>   <span class="p">|</span>   └── hrt_model_exec
    <span class="p">|</span>   └── lib
    <span class="p">|</span>       ├── libdnn.so
    <span class="p">|</span>       └── libhbdk_sim_x86.so
    ├── ILSVRC2012_val_00000001.bin
    └── readme.txt
</pre></div>
</div>
</section>
<section id="output-list">
<h4><span class="section-number">3.2.3.2. </span>Output List<a class="headerlink" href="#output-list" title="Permalink to this headline"></a></h4>
<p>Some CSV list(s) whose filename(s) is/are specified by the <code class="docutils literal notranslate"><span class="pre">vec_diff</span> <span class="pre">-o</span></code> command. In which: Left Files, Right Files, Cosine Similarity,Relative Euclidean Distance, Max Absolute Error and Mean Square Error.
See below:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Left Files</p></th>
<th class="head"><p>Right Files</p></th>
<th class="head"><p>Cosine Similarity</p></th>
<th class="head"><p>Relative Euclidean Distance</p></th>
<th class="head"><p>Max Absolute Error</p></th>
<th class="head"><p>Mean Square Error</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Layerxxx-quanti-input.txt</p></td>
<td><p>Layerxxx-float-input.txt</p></td>
<td><p>xxx</p></td>
<td><p>xxx</p></td>
<td><p>xxx</p></td>
<td><p>xxx</p></td>
</tr>
<tr class="row-odd"><td><p>Layerxxx-quanti-param.txt</p></td>
<td><p>Layerxxx-float-param.txt</p></td>
<td><p>xxx</p></td>
<td><p>xxx</p></td>
<td><p>xxx</p></td>
<td><p>xxx</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="multi-input-example">
<h3><span class="section-number">3.2.4. </span>multi_input_example<a class="headerlink" href="#multi-input-example" title="Permalink to this headline"></a></h3>
<section id="id4">
<h4><span class="section-number">3.2.4.1. </span>Directory<a class="headerlink" href="#id4" title="Permalink to this headline"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>04_multi_input_example
.
├── mapper
    ├── 01_check.sh                 // check model validity
    ├── 02_preprocess.sh            // preprocess the dataset
    ├── 03_build.sh                 // convert the debugging model
    ├── 04_inference.sh             // inference using the onnx runtime
    ├── data_preprocess.py
    ├── data_transformer.py
    ├── inference.py
    └── mobilenet_multi_config.yaml
</pre></div>
</div>
</section>
<section id="id5">
<h4><span class="section-number">3.2.4.2. </span>Description<a class="headerlink" href="#id5" title="Permalink to this headline"></a></h4>
<p>This section contains model conversion, simulator runtime and on-board runtime samples of multi-input models.</p>
</section>
</section>
<section id="model-verifier">
<h3><span class="section-number">3.2.5. </span>model_verifier<a class="headerlink" href="#model-verifier" title="Permalink to this headline"></a></h3>
<section id="id6">
<h4><span class="section-number">3.2.5.1. </span>Directory<a class="headerlink" href="#id6" title="Permalink to this headline"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>.
07_model_verifier
├── 01_preprocess.sh                // run model preprocess
├── 02_build.sh                     // convert the debugging model
├── 03_model_verify.sh              // run model verification
├── bgr_config.yaml
├── calibration_data_feature
├── data_preprocess.py
├── data_transformer.py
├── featuremap_config.yaml
├── mobilenet_config_bgr.yaml
├── mobilenet_config_yuv444.yaml
├── resnet50_featuremap_config.yaml
└── yuv444_config.yaml
</pre></div>
</div>
</section>
<section id="id7">
<h4><span class="section-number">3.2.5.2. </span>Description<a class="headerlink" href="#id7" title="Permalink to this headline"></a></h4>
<p>This section contains samples of model verification tool.</p>
</section>
</section>
<section id="model-info">
<h3><span class="section-number">3.2.6. </span>model_info<a class="headerlink" href="#model-info" title="Permalink to this headline"></a></h3>
<section id="id8">
<h4><span class="section-number">3.2.6.1. </span>Directory<a class="headerlink" href="#id8" title="Permalink to this headline"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>.
08_model_info
├── 01_preprocess.sh                // run model preprocess
├── 02_build.sh                     // convert the debugging model
├── 03_model_info_check.sh          // obtain and print model information
├── mobilenet_config.yaml
└── preprocess.py
</pre></div>
</div>
</section>
<section id="id9">
<h4><span class="section-number">3.2.6.2. </span>Description<a class="headerlink" href="#id9" title="Permalink to this headline"></a></h4>
<p>This section contains a samples of the model validation tool.</p>
</section>
</section>
<section id="mobilenet-bgr">
<h3><span class="section-number">3.2.7. </span>mobilenet_bgr<a class="headerlink" href="#mobilenet-bgr" title="Permalink to this headline"></a></h3>
<section id="id10">
<h4><span class="section-number">3.2.7.1. </span>Directory<a class="headerlink" href="#id10" title="Permalink to this headline"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>09_mobilenet_bgr
.
└── mapper
    ├── 01_check.sh               // check model validity
    ├── 02_preprocess.sh          // preprocess the dataset
    ├── 03_build.sh               // convert the debugging model
    ├── 04_inference.sh           // inference a single image
    ├── README.cn.md
    ├── mobilenet_config.yaml
    ├── postprocess.py
    └── preprocess.py
</pre></div>
</div>
</section>
<section id="id11">
<h4><span class="section-number">3.2.7.2. </span>Description<a class="headerlink" href="#id11" title="Permalink to this headline"></a></h4>
<p>This is a sample of the MobileNetv1 model whose <code class="docutils literal notranslate"><span class="pre">input_type_rt</span></code> is specified as <code class="docutils literal notranslate"><span class="pre">bgr</span></code>.</p>
</section>
</section>
<section id="mobilenet-yuv444">
<h3><span class="section-number">3.2.8. </span>mobilenet_yuv444<a class="headerlink" href="#mobilenet-yuv444" title="Permalink to this headline"></a></h3>
<section id="id12">
<h4><span class="section-number">3.2.8.1. </span>Directory<a class="headerlink" href="#id12" title="Permalink to this headline"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>10_mobilenet_yuv444
.
└── mapper
    ├── 01_check.sh               // check model validity
    ├── 02_preprocess.sh          // preprocess the dataset
    ├── 03_build.sh               // convert the debugging model
    ├── 04_inference.sh           // inference a single image
    ├── README.cn.md
    ├── mobilenet_config.yaml
    ├── postprocess.py
    └── preprocess.py
</pre></div>
</div>
</section>
<section id="id13">
<h4><span class="section-number">3.2.8.2. </span>Description<a class="headerlink" href="#id13" title="Permalink to this headline"></a></h4>
<p>This is a sample of the MobileNetv1 model whose <code class="docutils literal notranslate"><span class="pre">input_type_rt</span></code> is specified as <code class="docutils literal notranslate"><span class="pre">yuv444</span></code>.</p>
</section>
</section>
</section>
<section id="user-custom-op-sample">
<h2><span class="section-number">3.3. </span>User Custom OP Sample<a class="headerlink" href="#user-custom-op-sample" title="Permalink to this headline"></a></h2>
<section id="id14">
<h3><span class="section-number">3.3.1. </span>Directory<a class="headerlink" href="#id14" title="Permalink to this headline"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>06_custom_op
.
├── mapper
    ├── 02_preprocess.sh
    ├── 03_build.sh
    ├── 04_inference.sh
    ├── 05_evaluate.sh
    ├── cls_evaluate.py
    ├── cls_inference.py
    ├── googlenet_cop_config.yaml
    ├── onnx_modify.py
    ├── postprocess.py
    ├── preprocess.py
    ├── README.cn.md
    ├── sample_custom.py
    └── torch_export.py
</pre></div>
</div>
</section>
<section id="id15">
<h3><span class="section-number">3.3.2. </span>Description<a class="headerlink" href="#id15" title="Permalink to this headline"></a></h3>
<p>When converting the open-source framework trained floating-point model into fixed-point model,
the conversion will fail if there are Toolchain unsupported OP(s). In such case,
developers can still convert the model by adding custom OP using the custom OP feature.</p>
<p>Run the <code class="docutils literal notranslate"><span class="pre">create</span></code> command of <code class="docutils literal notranslate"><span class="pre">hb_custom_op</span></code> tool to implement the custom OP feature.
As shown in above directory structure, enter the 01_custom_op_creator folder and perform
<code class="docutils literal notranslate"><span class="pre">sh</span> <span class="pre">01_create_op.sh</span></code>, so that a custom OP template file should be generated in current directory.</p>
<p>The 02_mapper folder contains the scripts and configuration file required by running this sample.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="02_algorithm_sample.html" class="btn btn-neutral float-left" title="2. Algorithm Model Samples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, horizon.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>