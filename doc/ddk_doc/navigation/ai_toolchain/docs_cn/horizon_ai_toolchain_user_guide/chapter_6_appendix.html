<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>6. 附录 &mdash; horizon_ai_toolchain_user_guide v1.12.3 文档</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom-style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="prev" title="5. 自定义算子开发" href="chapter_5_custom_op_development.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> horizon_ai_toolchain_user_guide
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">AI工具链:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="chapter_1_introduction.html">1. 产品介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_2_prerequisites.html">2. 环境部署</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_3_model_conversion.html">3. 模型转换</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_4_application_development.html">4. 应用开发</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_5_custom_op_development.html">5. 自定义算子开发</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">6. 附录</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#benchmark">6.1. 模型性能Benchmark</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-note">6.2. Release Note</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">horizon_ai_toolchain_user_guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">6. </span>附录</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/chapter_6_appendix.rst.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1><span class="section-number">6. </span>附录<a class="headerlink" href="#id1" title="永久链接至标题"></a></h1>
<section id="benchmark">
<h2><span class="section-number">6.1. </span>模型性能Benchmark<a class="headerlink" href="#benchmark" title="永久链接至标题"></a></h2>
<p><strong>说明</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>测试条件：</p>
<ul>
<li><p>测试开发板：x3sdbx3-samsung2G-3200。</p></li>
<li><p>测试核心数：单核。</p></li>
<li><p>性能数据获取频率设置为：每5分钟获取一次性能参数。</p></li>
<li><p>帧率说明：FPS = 1,000/ITC。</p></li>
</ul>
</li>
<li><p>表头缩写：</p>
<ul>
<li><p>C = 计算量，单位为GOPs（十亿次运算/秒）。此数据通过 <code class="docutils literal notranslate"><span class="pre">hb_perf</span></code> 工具获得。</p></li>
<li><p>FPS = 每秒帧率。此数据在开发板单线程运行ai_benchmark_j3示例包/script路径下各模型子文件夹的 <strong>latency.sh</strong> 脚本获取，不含后处理。</p></li>
<li><p>ITC = 推理耗时。此数据在开发板单线程运行ai_benchmark_j3示例包/script路径下各模型子文件夹的 <strong>latency.sh</strong> 脚本获取，不含后处理。</p></li>
<li><p>TCPP = 后处理耗时。此数据在开发板单线程运行ai_benchmark_j3示例包/script路径下各模型子文件夹的 <strong>latency.sh</strong> 脚本获取。</p></li>
<li><p>RV = 单帧读取数据量。此数据通过 <code class="docutils literal notranslate"><span class="pre">hb_perf</span></code> 工具获得。</p></li>
<li><p>WV = 单帧写入数据量。此数据通过 <code class="docutils literal notranslate"><span class="pre">hb_perf</span></code> 工具获得。</p></li>
</ul>
</li>
</ul>
</div></blockquote>
<table class="docutils align-center">
<colgroup>
<col style="width: 11%" />
<col style="width: 15%" />
<col style="width: 6%" />
<col style="width: 4%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 7%" />
<col style="width: 35%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>模型名称</strong></p></td>
<td><p><strong>输入尺寸</strong></p></td>
<td><p><strong>C(GOPs)</strong></p></td>
<td><p><strong>FPS</strong></p></td>
<td><p><strong>ITC(ms)</strong></p></td>
<td><p><strong>TCPP(ms)</strong></p></td>
<td><p><strong>RV(mb)</strong></p></td>
<td><p><strong>WV(mb)</strong></p></td>
<td><p><strong>模型精度</strong></p></td>
<td><p><strong>LINKS</strong></p></td>
</tr>
<tr class="row-even"><td><p><strong>EfficientNet-Lite0</strong></p></td>
<td><p>1x224x224x3</p></td>
<td><p>0.72</p></td>
<td><p>437.8284</p></td>
<td><p>2.284</p></td>
<td><p>0.078</p></td>
<td><p>4.91</p></td>
<td><p>0.1</p></td>
<td><p>Top1：
0.7469(INT8）</p></td>
<td><p><a class="reference external" href="https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite">https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>EfficientNet-Lite1</strong></p></td>
<td><p>1x240x240x3</p></td>
<td><p>1.12</p></td>
<td><p>311.7207</p></td>
<td><p>3.208</p></td>
<td><p>0.078</p></td>
<td><p>5.89</p></td>
<td><p>0.3</p></td>
<td><p>Top1：
0.7625(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite">https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>EfficientNet-Lite2</strong></p></td>
<td><p>1x260x260x3</p></td>
<td><p>1.60</p></td>
<td><p>176.4602</p></td>
<td><p>5.667</p></td>
<td><p>0.075</p></td>
<td><p>6.44</p></td>
<td><p>0.14</p></td>
<td><p>Top1：
0.7716(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite">https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>EfficientNet-Lite3</strong></p></td>
<td><p>1x280x280x3</p></td>
<td><p>2.58</p></td>
<td><p>116.3467</p></td>
<td><p>8.597</p></td>
<td><p>0.074</p></td>
<td><p>8.71</p></td>
<td><p>0.25</p></td>
<td><p>Top1：
0.7905(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite">https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>EfficientNet-Lite4</strong></p></td>
<td><p>1x300x300x3</p></td>
<td><p>4.76</p></td>
<td><p>65.7507</p></td>
<td><p>14.651</p></td>
<td><p>0.074</p></td>
<td><p>14.42</p></td>
<td><p>1.3</p></td>
<td><p>Top1：
0.8058(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite">https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>MobileNetv1</strong></p></td>
<td><p>1x3x224x224</p></td>
<td><p>1.06</p></td>
<td><p>311.1388</p></td>
<td><p>3.214</p></td>
<td><p>0.075</p></td>
<td><p>4.79</p></td>
<td><p>0.58</p></td>
<td><p>Top1:
0.7033(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/shicai/MobileNet-Caffe">https://github.com/shicai/MobileNet-Caffe</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>MobileNetv2</strong></p></td>
<td><p>1x3x224x224</p></td>
<td><p>0.80</p></td>
<td><p>410.1723</p></td>
<td><p>2.438</p></td>
<td><p>0.074</p></td>
<td><p>3.78</p></td>
<td><p>0.1</p></td>
<td><p>Top1：
0.7115(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/shicai/MobileNet-Caffe">https://github.com/shicai/MobileNet-Caffe</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>MobileNet-SSD</strong></p></td>
<td><p>1x3x300x300</p></td>
<td><p>2.14</p></td>
<td><p>141.1831</p></td>
<td><p>7.083</p></td>
<td><p>3.759</p></td>
<td><p>8.76</p></td>
<td><p>2.82</p></td>
<td><p>mAP：
0.7188(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/chuanqi305/MobileNet-SSD">https://github.com/chuanqi305/MobileNet-SSD</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>ResNet18</strong></p></td>
<td><p>1x3x224x224</p></td>
<td><p>3.40</p></td>
<td><p>113.6880</p></td>
<td><p>8.796</p></td>
<td><p>0.075</p></td>
<td><p>11.87</p></td>
<td><p>0.47</p></td>
<td><p>Top1：
0.6836(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/HolmesShuan/ResNet-18-Caffemodel-on-ImageNet">https://github.com/HolmesShuan/ResNet-18-Caffemodel-on-ImageNet</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>GoogleNet</strong></p></td>
<td><p>1x3x224x224</p></td>
<td><p>2.79</p></td>
<td><p>121.2709</p></td>
<td><p>8.246</p></td>
<td><p>0.074</p></td>
<td><p>10.12</p></td>
<td><p>3.25</p></td>
<td><p>Top1：
0.6996(INT8)</p></td>
<td><p><a class="reference external" href="https://github.com/BVLC/caffe/tree/master/models/bvlc_googlenet">https://github.com/BVLC/caffe/tree/master/models/bvlc_googlenet</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>YOLOv2</strong>
(backbone=GoogleNet)</p></td>
<td><p>1x3x608x608</p></td>
<td><p>58.62</p></td>
<td><p>6.4910</p></td>
<td><p>154.059</p></td>
<td><p>1.699</p></td>
<td><p>62.80</p></td>
<td><p>13.21</p></td>
<td><p>[IoU=0.50:0.95]
0.271(INT8);</p></td>
<td><p><a class="reference external" href="https://pjreddie.com/darknet/yolo/">https://pjreddie.com/darknet/yolo/</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>YOLOv3</strong>
(backbone=DarkNet19)</p></td>
<td><p>1x3x416x416</p></td>
<td><p>61.37</p></td>
<td><p>5.9890</p></td>
<td><p>166.973</p></td>
<td><p>9.346</p></td>
<td><p>103.5</p></td>
<td><p>32.59</p></td>
<td><p>[IoU=0.50:0.95]
0.336(INT8);</p></td>
<td><p><a class="reference external" href="https://github.com/ChenYingpeng/caffe-yolov3/">https://github.com/ChenYingpeng/caffe-yolov3/</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>YOLOv5</strong>
(backbone=Darknet53)</p></td>
<td><p>1x3x672x672</p></td>
<td><p>17.87</p></td>
<td><p>14.8898</p></td>
<td><p>67.160</p></td>
<td><p>20.709</p></td>
<td><p>42.75</p></td>
<td><p>40.50</p></td>
<td><p>[IoU=0.50:0.95]
0.342(INT8);</p></td>
<td><p><a class="reference external" href="https://github.com/ultralytics/yolov5/releases/tag/v2.0">https://github.com/ultralytics/yolov5/releases/tag/v2.0</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>EfficientDet-d0</strong>
(backbone=EfficientNet)</p></td>
<td><p>1x3x512x512</p></td>
<td><p>4.59</p></td>
<td><p>60.5804</p></td>
<td><p>16.507</p></td>
<td><p>24.035</p></td>
<td><p>9.21</p></td>
<td><p>18.23</p></td>
<td><p>[IoU=0.50:0.95]
0.313(INT8);</p></td>
<td><p><a class="reference external" href="https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/EfficientDet">https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/EfficientDet</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>UNet</strong>
(backbone=MobileNet)</p></td>
<td><p>1x1024x2048x3</p></td>
<td><p>6.87</p></td>
<td><p>24.1057</p></td>
<td><p>41.484</p></td>
<td><p>17.795</p></td>
<td><p>50.62</p></td>
<td><p>41.76</p></td>
<td><p>[accuracy]
0.9366(INT8);</p>
<p>[mIoU]
0.638184(INT8).</p>
</td>
<td><p><a class="reference external" href="https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/MobilenetUnet">https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/MobilenetUnet</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>CenterNet</strong>
(backbone= ResNet50)</p></td>
<td><p>1x3x512x512</p></td>
<td><p>48.19</p></td>
<td><p>8.4940</p></td>
<td><p>117.730</p></td>
<td><p>32.311</p></td>
<td><p>70.17</p></td>
<td><p>35.88</p></td>
<td><p>[IoU=0.50:0.95]
0.313(INT8);</p></td>
<td><p><a class="reference external" href="https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/Centernet">https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/Centernet</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>FCOS</strong>
(backbone=
EfficientNetb0)</p></td>
<td><p>1x3x512x512</p></td>
<td><p>4.68</p></td>
<td><p>73.8498</p></td>
<td><p>13.541</p></td>
<td><p>4.322</p></td>
<td><p>8.95</p></td>
<td><p>5.54</p></td>
<td><p>[IoU=0.50:0.95]
0.345(INT8);</p></td>
<td><p>TBD</p></td>
</tr>
</tbody>
</table>
</section>
<section id="release-note">
<h2><span class="section-number">6.2. </span>Release Note<a class="headerlink" href="#release-note" title="永久链接至标题"></a></h2>
<p><span class="red">v1.12.3</span></p>
<ol class="arabic simple">
<li><p><strong>Runtime</strong> 新增 <code class="docutils literal notranslate"><span class="pre">hbDNNGetInputName</span></code> 和 <code class="docutils literal notranslate"><span class="pre">hbDNNGetOutputName</span></code> 接口用于获取模型输入/输出张量名称</p></li>
<li><p><strong>Runtime</strong> 新增预测库头文件 <code class="docutils literal notranslate"><span class="pre">properties.alignedByteSize</span></code> 字段用于分配内存</p></li>
<li><p><strong>Runtime</strong> 基础示例包（即OE包的 <code class="docutils literal notranslate"><span class="pre">ddk/samples/ai_toolchain/horizon_runtime_sample/xj3/script</span></code> 子路径）
重构了 <code class="docutils literal notranslate"><span class="pre">00_quick_start</span></code> 快速开始示例</p></li>
<li><p><strong>HBDK</strong> 编译器使用了新的内存分配算法. 在大多数情况下降低了内存占用. 在Bernoulli芯片上平均降低20%内存占用，
极大地降低了使用 <code class="docutils literal notranslate"><span class="pre">--split-by-input-dims</span></code> 选项编译的模型的内存占用</p></li>
<li><p><strong>HorizonNN</strong> 新增horizon onnx 和 onnxruntime域</p></li>
<li><p><strong>HorizonNN</strong> 新增 <code class="docutils literal notranslate"><span class="pre">horizon_nn.torch.export_onnx</span></code> 用于将PyTorch模型转换为ONNX模型</p></li>
<li><p><strong>HorizonNN</strong> 新增支持 <code class="docutils literal notranslate"><span class="pre">Gelu</span></code> 算子</p></li>
<li><p><strong>HorizonNN</strong> 新增支持 <code class="docutils literal notranslate"><span class="pre">GridSample</span></code> 算子</p></li>
<li><p><strong>HorizonNN</strong> 新增支持量化 <code class="docutils literal notranslate"><span class="pre">Transpose</span></code> 算子</p></li>
<li><p><strong>HorizonNN</strong> 新增支持量化 <code class="docutils literal notranslate"><span class="pre">keepdims=0</span></code> 的 <code class="docutils literal notranslate"><span class="pre">argmax</span></code> 算子</p></li>
<li><p><strong>HorizonNN</strong> 优化了Python代码测试范围</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_model_verifier</span></code> 工具新增对多batch模型的判断，同时在数据读取和生成时进行相应匹配</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_perf</span></code> 工具优化，当模型输入为NV12时，将画出NV12到YUV444的转换过程中的内部转换节点</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_perf</span></code> 工具优化了生成的HTML中对模型性能的展示</p></li>
<li><p><strong>HBDK</strong> Torch前端新增mean算子</p></li>
<li><p><strong>《HB Mapper工具手册》</strong> 和 <strong>《AI-Benchmark使用说明》</strong> 新增 <code class="docutils literal notranslate"><span class="pre">hb_eval_preprocess</span></code> 工具说明，
该工具用于模型精度评测过程中对图片数据进行预处理</p></li>
</ol>
<p><span class="gray">v1.10.5</span></p>
<ol class="arabic simple">
<li><p>地平线为用户使用提供芯片工具链所需的公共数据集</p></li>
<li><p><strong>horizon_xj3_open_explorer</strong> 发布物示例中新增校准数据集</p></li>
<li><p><strong>HBDK</strong> 支持 <code class="docutils literal notranslate"><span class="pre">dilation</span></code> 为 <code class="docutils literal notranslate"><span class="pre">16x16</span></code> 的卷积</p></li>
<li><p><strong>HBDK</strong> <code class="docutils literal notranslate"><span class="pre">hbdk-model-verifier</span></code> 在没有指定输入数据时支持自动生成随机输入数据</p></li>
<li><p><strong>HBDK</strong> <code class="docutils literal notranslate"><span class="pre">max</span> <span class="pre">pooling</span></code> 算子的 <code class="docutils literal notranslate"><span class="pre">stride</span></code> 限制从 <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">256]</span></code> 修改为 <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">185]</span></code></p></li>
<li><p><strong>horizon_model_convert_sample</strong> 模型转换示例包杂项示例（05_miscellaneous/）新增以 <code class="docutils literal notranslate"><span class="pre">bgr</span></code> 和 <code class="docutils literal notranslate"><span class="pre">yuv444</span></code> 为 <code class="docutils literal notranslate"><span class="pre">input_type_rt</span></code> 的MobileNetv1模型示例
并优化了部分现有示例</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_mapper</span> <span class="pre">makertbin</span></code> 模型编译命令的YAML配置文件的输入信息参数组新增 <code class="docutils literal notranslate"><span class="pre">input_batch</span></code> 参数用于设置输入网络的 <code class="docutils literal notranslate"><span class="pre">batch_size</span></code></p></li>
<li><p><strong>Runtime</strong> 开放了CPU算子batch能力</p></li>
<li><p><strong>Runtime</strong> 新增模型输出能力级功能</p></li>
<li><p><strong>HorizonNN</strong> 新增用于创建 <code class="docutils literal notranslate"><span class="pre">HzQuantize</span></code> 和 <code class="docutils literal notranslate"><span class="pre">HzDequantize</span></code> 节点的函数</p></li>
<li><p><strong>HorizonNN</strong> 新增qat modification pass并修复qat compile</p></li>
</ol>
<p><span class="gray">v1.9.2</span></p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hb_model_verifier</span></code> 模型验证工具优化了模型结果不对齐时的结果展示</p></li>
<li><p><strong>horizon_model_convert_sample</strong> 模型转换示例包优化了示例YAML文件</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_mapper</span></code> 工具的 <code class="docutils literal notranslate"><span class="pre">checker</span></code> 模型检查子命令和 <code class="docutils literal notranslate"><span class="pre">makertbin</span></code> 模型转换子命令新增支持batch模型转换</p></li>
<li><p><strong>Runtime</strong> opset11新增支持 <code class="docutils literal notranslate"><span class="pre">Concat</span></code>, <code class="docutils literal notranslate"><span class="pre">Pad</span></code>, <code class="docutils literal notranslate"><span class="pre">Slice</span></code> 和 <code class="docutils literal notranslate"><span class="pre">resize</span></code> 算子</p></li>
<li><p><strong>HorizonNN</strong> 新增split并将batchnorm移动到concat通道之前</p></li>
<li><p><strong>HorizonNN</strong> 优化了quanti mul以支持量化乘积为单标量的 <code class="docutils literal notranslate"><span class="pre">Mul</span></code></p></li>
<li><p><strong>HorizonNN</strong> 将校准节点转换为量化和反量化节点</p></li>
<li><p><strong>HorizonNN</strong> 优化了 <code class="docutils literal notranslate"><span class="pre">HzPreQuantConv</span></code> 到 <code class="docutils literal notranslate"><span class="pre">HzSQuantizedConv</span></code> 的转换</p></li>
<li><p><strong>HorizonNN</strong> 新增一个 <code class="docutils literal notranslate"><span class="pre">SetConvScalesAndBits</span></code> 通道用于找到Conv的输入输出量化系数</p></li>
<li><p><strong>HorizonNN</strong> 新增支持将已校准模型转换为量化模型</p></li>
<li><p><strong>HorizonNN</strong> 优化了Conv量化和 <code class="docutils literal notranslate"><span class="pre">ConvTranspose</span></code> 算子</p></li>
<li><p><strong>HorizonNN</strong> 将quantizer相关通道移至quantizer路径</p></li>
<li><p><strong>HorizonNN</strong> 将optimizer相关通道移至optimizer路径</p></li>
<li><p><strong>HorizonNN</strong> 的 <code class="docutils literal notranslate"><span class="pre">RunGraphTransformations</span></code> 新增支持infershape</p></li>
<li><p><strong>HorizonNN</strong> 新增 <code class="docutils literal notranslate"><span class="pre">GraphTransformationsSet</span></code> 用于模型转换通道管理</p></li>
<li><p><strong>HorizonNN</strong> 将 <code class="docutils literal notranslate"><span class="pre">quantize</span></code> 和 <code class="docutils literal notranslate"><span class="pre">dequantize</span></code> 节点移至optimizer</p></li>
<li><p>取消对Ubuntu 16的支持</p></li>
</ol>
<p><span class="gray">v1.8.6</span></p>
<ol class="arabic simple">
<li><p><strong>Runtime</strong> <strong>DNN</strong> 支持含bool类型OP的模型</p></li>
<li><p><strong>Runtime</strong> 调整 <code class="docutils literal notranslate"><span class="pre">resizer</span></code> 模型的 <code class="docutils literal notranslate"><span class="pre">infer</span></code> 接口</p></li>
<li><p><strong>dnn_tools</strong> 模型dump输出txt文件，float数据支持指定小数点位数</p></li>
<li><p><strong>dnn_tools</strong> 增加模型第一次加载时间统计</p></li>
<li><p><strong>dnn_tools</strong> 运行 <code class="docutils literal notranslate"><span class="pre">perf</span></code> 功能时，支持指定输入文件</p></li>
<li><p><strong>HorizonNN</strong> 校准节点支持per-channel量化</p></li>
<li><p><strong>HorizonNN</strong> 新增 <code class="docutils literal notranslate"><span class="pre">min-max</span></code> calibrater用于获取张量的范围</p></li>
<li><p><strong>HorizonNN</strong> 新增用于转换hat模型的部分API</p></li>
<li><p><strong>HorizonNN</strong> 优化了节点名称过长的模型的量化信息打印</p></li>
<li><p><strong>HorizonNN</strong> 优化了 reshape mutation opt pass 用于支持更多激活算子</p></li>
<li><p><strong>HorizonNN</strong> 优化了 <code class="docutils literal notranslate"><span class="pre">quanti</span></code> 和 <code class="docutils literal notranslate"><span class="pre">dequantize</span></code></p></li>
<li><p><strong>HorizonNN</strong> 优化了pytorch qat转换API</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HBDK</span></code> 发布的wheel包中不再包含运行时的头文件和改动记录。这些文件被移动到了另一个包中</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HBDK</span></code> 编译器的Python接口增加了一个参数用于指定 <code class="docutils literal notranslate"><span class="pre">hbdk-cc</span></code> 的额外参数</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HBDK</span></code> 在J5芯片微架构上 <code class="docutils literal notranslate"><span class="pre">hbrtBilinearRoiResize</span></code> 系列的接口不再支持输出 <code class="docutils literal notranslate"><span class="pre">NHCW_4H4W8C_4PEN</span></code> 的layout</p></li>
<li><p><strong>Runtime</strong> <code class="docutils literal notranslate"><span class="pre">dequantize</span></code> / <code class="docutils literal notranslate"><span class="pre">quantize</span></code> 逻辑修改</p></li>
<li><p><strong>Runtime libdnn</strong> 发布x86预测库</p></li>
<li><p>模型转换示例包更新了FCOS等模型的前处理 <code class="docutils literal notranslate"><span class="pre">transform</span></code></p></li>
</ol>
<p><span class="gray">v1.7.8</span></p>
<ol class="arabic simple">
<li><p><strong>HorizonNN</strong> 新增打印校准数据MD5码功能</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HBDK</span></code> 在bernoulli和bernoulli2架构上支持 <code class="docutils literal notranslate"><span class="pre">broadcast_add</span></code> 算子</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HBDK</span></code> 的PyTorch模型支持 <code class="docutils literal notranslate"><span class="pre">elementwise_mul</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pad_one_axis</span></code> 算子</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HBDK</span></code> 为运行时的 <code class="docutils literal notranslate"><span class="pre">roiresize</span></code> 系列的接口增加缩放尺度的检查。当缩放尺度不满足硬件限制时报错</p></li>
<li><p><strong>runtime</strong> 重构示例包目录结构，精度测评通过挂载模型前处理数据，读取静态图进行评测，脚本修订为accuracy.sh</p></li>
<li><p><strong>runtime</strong> 性能及latency评测方式不变，脚本修订为fps.sh 和latency.sh</p></li>
<li><p><strong>runtime</strong> 新增 efficient_det_no_dequanti_512x512_nv12.bin 模型示例</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hrt_model_exec</span></code> 工具新增 <code class="docutils literal notranslate"><span class="pre">--per_time</span></code> 配置，用于指定perf时间；<code class="docutils literal notranslate"><span class="pre">--node_profile</span></code> 修改为 <code class="docutils literal notranslate"><span class="pre">--profile_path</span></code>
<code class="docutils literal notranslate"><span class="pre">--core_num</span></code> 修改为 <code class="docutils literal notranslate"><span class="pre">--core_id</span></code>；详情参考《AI芯片工具链用户手册》文档4.7小节内容</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_model_modifier</span></code> 工具优化</p></li>
<li><p>模型发布物 <strong>model_zoo</strong> 移除了efficient_det模型临时文件和se_resnet_gray模型</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">horizon_tc_ui</span></code> 新增自动更新版本号脚本</p></li>
<li><p>模型转换示例包更新了示例模型的数据校准策略</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_mapper_info</span></code> 和 <code class="docutils literal notranslate"><span class="pre">hb_mapper_makertbin</span></code> 工具更新了log输出，使其保持一致</p></li>
<li><p>《模型转换示例包》文档新增2.5 FAQ说明如何运行原始浮点模型</p></li>
<li><p>《AI芯片工具链用户手册》新增其他应用开发工具章节，介绍 <code class="docutils literal notranslate"><span class="pre">hrt_bin_dump</span></code> 和 <code class="docutils literal notranslate"><span class="pre">hrt_model_exec</span></code> 工具</p></li>
</ol>
<p><span class="gray">v1.6.6</span></p>
<ol class="arabic simple">
<li><p><strong>HorizonNN</strong> 新增 <code class="docutils literal notranslate"><span class="pre">lut</span></code> 特殊激活配置</p></li>
<li><p><strong>HorizonNN</strong> 移除了编译阶段的 <code class="docutils literal notranslate"><span class="pre">ir_version</span></code> 检查报错</p></li>
<li><p><strong>HorizonNN</strong> 从ONNX通道initializer获取张量时新增迭代检查</p></li>
<li><p><strong>HorizonNN</strong> 优化了不对称量化参数</p></li>
<li><p><strong>HorizonNN</strong> 优化了默认校准</p></li>
<li><p><strong>HorizonNN</strong> 优化了节点适配器支持广播相加与相乘（broadcast add and mul）</p></li>
<li><p><strong>HBDK</strong> 支持在bernoulli2架构上编译PyTorch模型</p></li>
<li><p><strong>HBDK</strong> 在 <code class="docutils literal notranslate"><span class="pre">hbdk-disas</span></code> 的JSON输出中增加了内存占用信息</p></li>
<li><p><strong>HBDK</strong> 支持输入不带转置的矩阵相乘</p></li>
<li><p><strong>HBDK</strong> 添加 <code class="docutils literal notranslate"><span class="pre">HBRT</span></code> API <code class="docutils literal notranslate"><span class="pre">hbrtRiNextSegmentInvolveCpu</span></code>。
使用这个API的前提是在调用 <code class="docutils literal notranslate"><span class="pre">hbrtRiStart</span></code> 时， 设置 <code class="docutils literal notranslate"><span class="pre">ri_config.enable_bpu_segment_done_check</span></code> 为 <code class="docutils literal notranslate"><span class="pre">true</span></code></p></li>
<li><p><strong>HBDK</strong>  <code class="docutils literal notranslate"><span class="pre">HBRT</span></code> 中增加对输入数据地址对齐的检查</p></li>
<li><p><strong>HBDK</strong> 当 <code class="docutils literal notranslate"><span class="pre">hbdk-cc</span></code> 和 <code class="docutils literal notranslate"><span class="pre">hbdk-model-check</span></code> 中为HBIR模型指定了 <code class="docutils literal notranslate"><span class="pre">-s</span></code> 选项时报错。HBIR模型不支持动态输入尺寸</p></li>
<li><p><strong>HBDK</strong>  <code class="docutils literal notranslate"><span class="pre">hbrtQuantize</span></code> 和 <code class="docutils literal notranslate"><span class="pre">hbrtQuantizeByScale</span></code> 在结果溢出时进行饱和</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_model_modifier</span></code> 工具新增删除输出部分反量化的功能</p></li>
</ol>
<p><span class="gray">v1.5.9</span></p>
<ol class="arabic simple">
<li><p>开放了使用GPU推理ONNX模型的能力</p></li>
<li><p>对各模型转换工具进行了优化，提升了用户友好度</p></li>
<li><p>模型转换示例中默认 <code class="docutils literal notranslate"><span class="pre">input_type</span></code> 参数进行了统一</p></li>
<li><p><strong>Runtime</strong> 示例包和API文档改为HTML格式</p></li>
<li><p><strong>Runtime</strong> 新增支持非对称量化OP</p></li>
<li><p><strong>Runtime</strong> Reduction OP支持 <code class="docutils literal notranslate"><span class="pre">axes</span></code> 默认值</p></li>
<li><p><strong>model_zoo</strong> 模型发布物中的bin模型名称改为：***.bin</p></li>
<li><p><strong>Runtime</strong> ai_benchmark示例包脚本适配模型名称修改</p></li>
<li><p><strong>Runtime</strong> 示例精度测试模型改为nv12模型</p></li>
<li><p><strong>HorizonNN</strong> 优化了C++中的log输出</p></li>
<li><p><strong>HorizonNN</strong> 优化了没有BPU节点时的log输出</p></li>
<li><p><strong>HorizonNN</strong> 新增节点属性检查</p></li>
<li><p><strong>HorizonNN</strong> 将 <code class="docutils literal notranslate"><span class="pre">exit()</span></code> 替换为引发异常</p></li>
<li><p><strong>HorizonNN</strong> 支持使用校正模型评估模型准确率</p></li>
<li><p><strong>HorizonNN</strong> 支持CPU版本 <code class="docutils literal notranslate"><span class="pre">HzDequantize</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">zero-point</span></code></p></li>
<li><p><strong>HorizonNN</strong> 支持GPU版本 <code class="docutils literal notranslate"><span class="pre">HzDequantize</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">zero-point</span></code></p></li>
<li><p><strong>HorizonNN</strong> <code class="docutils literal notranslate"><span class="pre">HzDequantize</span></code> 和 <code class="docutils literal notranslate"><span class="pre">HzQuantize</span></code> 中新增zero point属性测试</p></li>
<li><p><strong>HBDK</strong> 为fasterRCNN类的模型增加运行时 <code class="docutils literal notranslate"><span class="pre">code</span> <span class="pre">cache</span></code> 机制。
当 <code class="docutils literal notranslate"><span class="pre">code</span> <span class="pre">cache</span></code> 被正确配置时，模型的CPU时间将显著下降。
通过设置运行时环境变量 <code class="docutils literal notranslate"><span class="pre">HBRT_CODE_CACHE_SIZE</span></code> 可以限制 <code class="docutils literal notranslate"><span class="pre">code</span> <span class="pre">cache</span></code> 的最大内存占用。
环境变量的内存单位是KB。只有重新编译模型，<code class="docutils literal notranslate"><span class="pre">code</span> <span class="pre">cache</span></code> 才能生效。
注意 <code class="docutils literal notranslate"><span class="pre">code</span> <span class="pre">cache</span></code> 是默认关闭的，需要显式设置 <code class="docutils literal notranslate"><span class="pre">HBRT_CODE_CACHE_SIZE</span></code> 才能打开</p></li>
<li><p><strong>HBDK</strong> 为运行时即时编译产生的BPU functioncall增加了预估执行时间。
在先前的版本中，这些functioncall的预估执行时间是0</p></li>
<li><p><strong>HBDK</strong> 提高了J5芯片的 <code class="docutils literal notranslate"><span class="pre">hbdk-perf</span></code> 准确性</p></li>
<li><p><strong>Runtime</strong> 各发布物中移除了 <code class="docutils literal notranslate"><span class="pre">bpu-predict</span></code>, <code class="docutils literal notranslate"><span class="pre">appsdk</span></code>, <code class="docutils literal notranslate"><span class="pre">xstream</span></code> 和 <code class="docutils literal notranslate"><span class="pre">xproto</span></code> 相关的库</p></li>
<li><p><strong>Runtime</strong> 的 <code class="docutils literal notranslate"><span class="pre">hrt_model_exec</span></code> 工具支持featuremap输入</p></li>
<li><p><strong>HorizonNN</strong> 新增BPU输入维度检查</p></li>
<li><p><strong>HorizonNN</strong> 优化了quantize resize</p></li>
<li><p><strong>Runtime</strong> 定点模型支持scale量化方法</p></li>
<li><p><strong>Runtime</strong> 优化了dequantize</p></li>
</ol>
<p><span class="gray">v1.4.7</span></p>
<ol class="arabic simple">
<li><p>各模型示例包新增FCOS模型示例</p></li>
<li><p>ReduceMax算子新增arm支持</p></li>
<li><p><strong>x3_tc_ui</strong> 工具更名为 <strong>horizon_tc_ui</strong>，且 <strong>x3_tc_ui</strong> 的使用方式仍然支持</p></li>
<li><p><strong>hb_mapper</strong> 优化配置了 <code class="docutils literal notranslate"><span class="pre">norm_type</span></code> 时的交互逻辑</p></li>
<li><p><strong>HBDK</strong> 在许多 <cite>hbrt</cite> 的API中增加了对空指针参数的检查和报错</p></li>
<li><p><strong>HBDK</strong> <code class="docutils literal notranslate"><span class="pre">hbdk-cc</span></code> 和 <code class="docutils literal notranslate"><span class="pre">hbdk-model-check</span></code> 现在对H*W超过18,432的模型报错。这些模型在BPU开发板上无法正确执行</p></li>
<li><p><strong>HBDK</strong> 废弃运行时API <code class="docutils literal notranslate"><span class="pre">hbrtGetResizerRoiHeightAlignment</span></code>, <code class="docutils literal notranslate"><span class="pre">hbrtGetResizerRoiWidthAlignment</span></code>
和 <code class="docutils literal notranslate"><span class="pre">hbrtGetModelPeNumber</span></code>。这些API将在未来版本中被彻底移除</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_pack</span></code> 模型打包工具不支持对打包后的模型进一步打包</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_model_verifier</span></code> 模型验证工具不支持验证打包模型，在输入为打包模型时给出不支持提示</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_model_modifier</span></code> 工具不支持处理打包模型，在输入为打包模型时给出不支持提示</p></li>
</ol>
<p>【文档包】</p>
<ol class="arabic simple">
<li><p>重构了原《地平线天工开物工具链（X3/J3）》文档，新文档《Horizon AI Toolchain User Guide》位于
open_explorer发布包中的：
<cite>horizon_xj3_open_explorer_${version}_${date}/ddk/doc/navigation/ai_toolchain/docs_cn/horizon_ai_toolchain_user_guide/</cite>
路径下</p></li>
<li><p>优化了原《Supported Caffe OP List》算子列表文件，新文档《supported_op_list_and_restrictions_release_${version}》
位于open_explorer发布包中的：
<cite>horizon_xj3_open_explorer_${version}_${date}/ddk/doc/navigation/ai_toolchain/docs_cn/supported_op_list_and_restrictions/</cite>
路径下</p></li>
</ol>
<p><span class="gray">v1.3.3</span></p>
<ol class="arabic simple">
<li><p><strong>HorizonNN</strong> 支持Mish算子量化</p></li>
<li><p><strong>HorizonNN</strong> 支持MatMul至Gemm通道转换</p></li>
<li><p><strong>HorizonNN</strong> 贝叶斯1微框架支持逐元素量化</p></li>
<li><p><strong>HorizonNN</strong> onnxruntime中的squantizedconv新增int4支持</p></li>
<li><p><strong>HorizonNN</strong> 在quantize conv pass中新增int4量化</p></li>
<li><p><strong>HorizonNN</strong> 支持模型输入layout转换</p></li>
<li><p><strong>HorizonNN</strong> 调整了优化通道顺序</p></li>
<li><p><strong>HorizonNN</strong> 新增关于不支持的conv1d算子的报错log</p></li>
<li><p><strong>HorizonNN</strong> 使用一个示例加速默认编译流程</p></li>
<li><p><strong>HorizonNN</strong> 重构了默认校准方法</p></li>
<li><p><strong>HorizonNN</strong> 优化了onnxruntime中的逐元素加法</p></li>
<li><p>各模型示例包中新增 <cite>CenterNet</cite> 模型示例</p></li>
<li><p>模型转换支持 <cite>MatMul</cite> 转换到BPU上</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_mapper</span></code> 新增 <cite>hb_model_modifier</cite> 工具是用于对指定的 <strong>runtime</strong> 模型中
输入端的Transpose及Quantize节点进行删除操作, 并将删除节点的信息存放在bin模型中
通过 <code class="docutils literal notranslate"><span class="pre">hb_model_info</span></code> 进行查看</p></li>
<li><p><strong>runtime</strong> 新增日志重定向接口，支持开发者通过user log获取更加详细的板端运行信息</p></li>
<li><p><strong>runtime</strong> 新老接口头文件分离</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_mapper</span></code> 重构并在 <code class="docutils literal notranslate"><span class="pre">input</span></code> 配置增加 <code class="docutils literal notranslate"><span class="pre">layout</span></code> 指定功能</p></li>
<li><p><strong>runtime</strong> 示例拆分为：基本示例（即：<cite>horizon_xj3_basic_sample-{version}.tar.gz</cite>）
和AI benchmark（即：<cite>horizon_xj3_ai_benchmark-{version}.tar.gz</cite>）。
其中基础示例用于API教学和特殊功能使用场景教学；AI benchmark用于模型精度和性能测试演示</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_mapper</span></code> 删除了配置文件中的 <cite>output_layout</cite> 选项</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_mapper</span></code> 的原始模型input配置增加layout指定功能，增加 <code class="docutils literal notranslate"><span class="pre">input_layout_train</span></code> 选项支持用户指定网络训练时的数据排布</p></li>
</ol>
<p><span class="gray">v1.2.3</span></p>
<ol class="arabic simple">
<li><p><strong>HorizonNN</strong> 升级了 <cite>HBIR RoiResize</cite> 接口</p></li>
<li><p><strong>HorizonNN</strong> 重构了校准模块中的数据加载操作</p></li>
<li><p><strong>HorizonNN</strong> 新增 <cite>ConsistencyChecker</cite> 用于比较 <cite>original_model</cite> 和 <cite>optimized_model</cite> 的一致性</p></li>
<li><p><strong>HorizonNN</strong> 的 <cite>ConsistencyChecker</cite> 新增支持每个针对Conv节点输出的一致性比较</p></li>
<li><p><strong>HorizonNN</strong> 的CenterNet benchmark新增更多模型</p></li>
<li><p><strong>HorizonNN</strong> 新增 <cite>CalibrationDataSet</cite> 管理校准数据</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_mapper</span></code> 模型转换工具限制模型输出个数为32</p></li>
<li><p>模型校准参数中的 <cite>input_type_train</cite> 参数支持设置为YUV444</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_mapper</span></code> 模型转换工具示例包与 <strong>Runtime</strong> 嵌入式开发示例包进行了拆分</p></li>
<li><p><strong>HBDK</strong> 编译器更新了 <cite>Roiresize</cite> 和 <cite>Concat</cite> 的模型检查规则</p></li>
<li><p><strong>HBDK</strong> 编译器的 <cite>hbrtBilinearRoiResize*</cite> 接口的缩放系数范围从[1/256, 256)修正为[1/185, 256)</p></li>
<li><p>X3/J3的 <cite>fully connected layer</cite> 指令限制更新。
旧限制：输出类型为 int32 时：<cite>kernel_h * DivCeil(kernel_w, 8) * DivCeil(kernel_c, 4) &lt;= 1024</cite>
新限制：输出类型为 int32 时：<cite>kernel_h * DivCeil(kernel_w, 8) * DivCeil(kernel_c, 4) &lt; 1024</cite></p></li>
<li><p><strong>HBDK</strong> 编译器优化了加载包含多个模型的hbm文件时的速度</p></li>
<li><p><strong>HBDK</strong> 编译器的 <cite>hbrtBilinearRoiResizeImage</cite> 接口在使用 <cite>pad zero</cite> 模式时支持8192的输入/输出宽度</p></li>
<li><p><strong>HBDK</strong> 编译器在支持为超过32个输出的模型的每个输出分别指定独立的地址。包含地址的结构体需要由用户申请内存。
此修改变更了 <cite>hbrt_ri_config_t</cite> 的结构体， 但保持此结构体的总大小不变， 原结构体重命名为 <cite>hbrt_ri_config_t_deprecated</cite>
<cite>hbrtRiStart</cite> 同时支持两种结构体。此改动对老代码ABI兼容，API不兼容。</p></li>
<li><p><strong>HBDK</strong> 编译器新增 <code class="docutils literal notranslate"><span class="pre">hbrt</span></code> 接口 <code class="docutils literal notranslate"><span class="pre">hbrtDumpSnapshot</span></code> 用于转储 <code class="docutils literal notranslate"><span class="pre">hbrt</span></code> 的内部数据来辅助故障定位</p></li>
<li><p><strong>HBDK</strong> 编译器新增对SMean Operator 的支持</p></li>
<li><p><strong>Runtime</strong> 嵌入式开发新增支持偶现问题 dump 更多 debug 信息</p></li>
<li><p><strong>Runtime</strong> 嵌入式开发基础示例包新增 <code class="docutils literal notranslate"><span class="pre">hrt_bin_dump</span></code> 工具用于模型一致性检校</p></li>
<li><p><strong>Runtime</strong> 嵌入式开发基础示例包 <code class="docutils literal notranslate"><span class="pre">hrt_model_exec</span></code> 和 <code class="docutils literal notranslate"><span class="pre">hrt_bin_dump</span></code> 工具新增示例脚本</p></li>
</ol>
<p><span class="gray">v1.1.21</span></p>
<ol class="arabic simple">
<li><p><strong>Runtime</strong> 新增 <code class="docutils literal notranslate"><span class="pre">hrt_model_exec</span></code> 工具，用户可使用.bin模型和运行参数快速了解模型性能</p></li>
<li><p>Softmax量化支持分割算法中获取每个像素点的置信度</p></li>
<li><p>新增了对模型尾部CONV高精度输出的控制，优化了 <strong>Runtime</strong> 中的pooling运行效率和整体计算性能</p></li>
<li><p>新增了示例中的部分模型来源和改动说明</p></li>
<li><p>新增了对ONNX opset10对equal OP的支持</p></li>
<li><p>新增了 <code class="docutils literal notranslate"><span class="pre">bpu_predict</span></code> 和 <code class="docutils literal notranslate"><span class="pre">lib_hbrt_bernoulli*</span></code> 静态库</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_mapper</span> <span class="pre">makertbin</span></code> 支持打印cos similarity对应的样本名称</p></li>
<li><p><strong>Runtime</strong> 的 <code class="docutils literal notranslate"><span class="pre">bpu_predict</span></code> 新增了系统软件dma拷贝接口</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bpu_runwithbox</span></code> 新增支持浮点模型</p></li>
<li><p>示例中的yaml文件和代码新增英文注释</p></li>
<li><p>优化了 <strong>Runtime</strong> 相关依赖库的安装和使用方式</p></li>
<li><p>优化了bpu sdk api中 <code class="docutils literal notranslate"><span class="pre">align</span></code> 参数设置，提升用户体验</p></li>
<li><p>优化了default自动推荐最优量化模型功能</p></li>
<li><p>变更了 <code class="docutils literal notranslate"><span class="pre">hb_perf</span></code> 和 <code class="docutils literal notranslate"><span class="pre">hbdk_perf</span></code> 的部分参数</p></li>
<li><p>修复了模拟器使用 <code class="docutils literal notranslate"><span class="pre">resize</span></code> 接口导致的平台不匹配问题</p></li>
<li><p>取消了 <strong>Runtime</strong> 的 <code class="docutils literal notranslate"><span class="pre">BPU_IO</span></code> 接口支持</p></li>
</ol>
<p><span class="gray">v1.1.20</span></p>
<ol class="arabic simple">
<li><p>新增示例脚本支持使用浮点ONNX模型进行inference</p></li>
<li><p>新增 <code class="docutils literal notranslate"><span class="pre">hb_pack</span></code> 工具用于多个二进制模型打包</p></li>
<li><p>浮点模型转换过程支持用户配置yaml文件指定CPU节点不进行量化</p></li>
<li><p>优化了多输入示例</p></li>
<li><p>修复了安装脚本引起的CentOS或Ubuntu系统中使用Docker镜像时示例包不可用问题</p></li>
<li><p>修复了 <code class="docutils literal notranslate"><span class="pre">runwithbox</span></code> 接口因部分box不符合resize硬件限制推理失败的问题，并开放了 <code class="docutils literal notranslate"><span class="pre">pyramidbox</span></code> 相关的结构信息</p></li>
<li><p>变更了发布物集成方式：将原来的 <strong>浮点转换工具链发布物</strong> <strong>horizon_x3_tc_{version}</strong> 拆分为 <strong>模型转换示例发布物</strong> <strong>horizon_model_convert_sample_{version}</strong> 和 <strong>浮点模型发布物</strong> <strong>modelzoo</strong></p></li>
</ol>
<p><span class="gray">v1.1.19</span></p>
<ol class="arabic simple">
<li><p>新增 EfficientDet 检测模型示例</p></li>
<li><p>新增 Unet 分割模型示例</p></li>
<li><p>模型转换易用性提升，针对异常情况给出详细解释</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_perf</span></code> 工具提升，以html形式输出混合模型的性能</p></li>
<li><p>支持用户可在配置文件中通过 <code class="docutils literal notranslate"><span class="pre">layername</span></code> 配置输出节点</p></li>
<li><p>模型校准 <code class="docutils literal notranslate"><span class="pre">Promoter</span></code> 功能下线</p></li>
</ol>
<p><span class="gray">v1.1.18</span></p>
<p>[新增]</p>
<ol class="arabic simple">
<li><p>新增自定义CPU功能的支持</p></li>
<li><p>新增对YUV BT601 NARROW和WIDE两种标准的支持</p></li>
</ol>
<p><strong>Runtime</strong></p>
<p>[新增]</p>
<ol class="arabic simple">
<li><p><strong>Runtime</strong> api推理api支持不定尺寸输入（基于resizer功能进行实现）</p></li>
</ol>
<p><strong>集成</strong></p>
<p>[新增]</p>
<ol class="arabic simple">
<li><p>新增mobilenet-ssd示例</p></li>
<li><p>针对 <code class="docutils literal notranslate"><span class="pre">mean/scale</span></code> 配置文件重构</p></li>
</ol>
<p>[变更]</p>
<ol class="arabic simple">
<li><p>将示例中的googlenet修改为无LRN版本</p></li>
</ol>
<p><strong>horizon-nn</strong></p>
<p>[变更]</p>
<ol class="arabic simple">
<li><p>删除了模型转换生成的dot文件</p></li>
</ol>
<p><span class="gray">v1.1.17</span></p>
<p><strong>集成</strong></p>
<p>[新增]</p>
<ol class="arabic simple">
<li><p>新增用于图像格式转换的源代码示例</p></li>
</ol>
<p>[优化]</p>
<ol class="arabic simple">
<li><p>优化了模型精度异常定位工具 <code class="docutils literal notranslate"><span class="pre">vec_diff</span></code> 的示例脚本，用户基于示例脚本使用该工具更加方便</p></li>
<li><p>YOLOV2/V3示例去掉transpose节点耗时提升评测效果</p></li>
<li><p>优化了YOLOV5示例，性能提升</p></li>
</ol>
<p>[变更]</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hb_mapper</span></code> 编译器debug参数修改默认值为 <code class="docutils literal notranslate"><span class="pre">false</span></code></p></li>
</ol>
<p><strong>horizon_nn</strong></p>
<p>[新增]</p>
<ol class="arabic simple">
<li><p>新增 <code class="docutils literal notranslate"><span class="pre">-np</span></code> 参数指定示例性能评测时是否测试后处理</p></li>
</ol>
<p><strong>Runtime</strong></p>
<p>[新增]</p>
<ol class="arabic simple">
<li><p>新增Runtime进阶示例包</p></li>
</ol>
<p>[优化]</p>
<ol class="arabic simple">
<li><p>板端声明 <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">HR_NODE_PROFILER=true</span></code> 后，可以生成各节点耗时情况的TXT文件</p></li>
</ol>
<p><strong>HBDK</strong></p>
<p>[新增]</p>
<ol class="arabic simple">
<li><p>支持argmax op</p></li>
</ol>
<p><span class="gray">v1.16</span></p>
<dl class="field-list simple">
<dt class="field-odd">发布时间</dt>
<dd class="field-odd"><p>2020年9月23日</p>
</dd>
</dl>
<p><strong>集成</strong></p>
<p>[新增]</p>
<ol class="arabic simple">
<li><p>示例中YOLOv5的示例删除多余的CPU上reshape和transpose节点，提高了帧率</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hb_mapper</span> <span class="pre">checker</span></code> 命令添加转runtime bin文件的检查</p></li>
</ol>
<p>[优化]</p>
<ol class="arabic simple">
<li><p>添加se-resnet灰度图示例</p></li>
<li><p>支持Ubuntu18.04版本</p></li>
</ol>
<p><strong>horizon_nn</strong></p>
<p>[新增]</p>
<ol class="arabic simple">
<li><p>新增支持shufflenet</p></li>
</ol>
<p><strong>Runtime</strong></p>
<p>[新增]</p>
<ol class="arabic simple">
<li><p>增加HzSoftmax op能够支持任意维度上进行Softmax计算</p></li>
<li><p>示例·中添加Runtime YOLOv5示例</p></li>
<li><p>CICD输出个开发板性能报告</p></li>
<li><p>新增debug工具，可打印包括cpu op的每一层输出</p></li>
<li><p>新增支持计算MAPS的可运行sample</p></li>
</ol>
<p><span class="gray">v1.15</span></p>
<dl class="field-list simple">
<dt class="field-odd">发布时间</dt>
<dd class="field-odd"><p>2020年8月21日</p>
</dd>
</dl>
<p><strong>集成</strong></p>
<p>[新增]</p>
<ol class="arabic simple">
<li><p>新增mobilenet_onnx、efficientnet_lite_onnx、faster rcnn等用户示例</p></li>
<li><p>新增 <code class="docutils literal notranslate"><span class="pre">model_info</span></code> 工具用于获取模型在编译时的依赖信息</p></li>
<li><p>新增 <code class="docutils literal notranslate"><span class="pre">model_verifier</span></code> 命令行工具用于校验ONNX模型infer与混合模型在模拟器和上板结果的一致性</p></li>
<li><p>yaml配置文件新增 <code class="docutils literal notranslate"><span class="pre">optimize_level</span></code> 接口用于描述编译器模型优化等级参数</p></li>
<li><p><strong>x3_tc_ui</strong> 工具的 <code class="docutils literal notranslate"><span class="pre">preprocess_on</span></code> 设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code> 的预处理时，增加“彩色图to灰度图转换”补充提示说明</p></li>
</ol>
<p>[变更]</p>
<ol class="arabic simple">
<li><p>yaml配置文件输入列表化，无需配置输入节点名称</p></li>
<li><p>模型量化优化工具Finetune模式更名为Promoter</p></li>
<li><p><strong>x3_tc_ui</strong> 工具封装ONNX Runtime -128操作，对齐前处理，节省用户的额外操作和使用成本</p></li>
</ol>
<p>[修复]</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">vec_diff</span></code> 工具yuv444输入与gray输入示例对齐</p></li>
</ol>
<p><strong>horizon_nn</strong></p>
<p>[新增]</p>
<ol class="arabic simple">
<li><p>新增 <code class="docutils literal notranslate"><span class="pre">build_onnx</span></code> 接口用于支持ONNX模型的量化</p></li>
<li><p>支持对典型PyTorch模型转换的ONNX模型的量化支持，包括：AlexNet、VGG-16、ResNet-18、ResNet-50、ResNet-152、SqueezeNet 1.0、SqueezeNet 1.1、Densenet-161、Inception v3、GoogleNet、ShuffleNet V2、MobileNet V2、ResNeXt-50-32x4d、ResNeXt-101-32x8d、Wide ResNet-50-2、MNASNet 1.0、YOLOv5s/m/l/x、efficientnet-lite0/1/2/3/4、EfficientNet</p></li>
<li><p>支持LSTM、SENet和STN模型量化</p></li>
</ol>
<p>[变更]</p>
<ol class="arabic simple">
<li><p>实现Per-channel量化方式，在一些典型模型上量化精度会提升</p></li>
</ol>
<p><strong>HBDK</strong></p>
<p>[新增]</p>
<ol class="arabic simple">
<li><p>BilinearResizeNV12接口支持小于4K的图片输入</p></li>
<li><p>BPU支持elementwise mul和lookup table op</p></li>
<li><p>BPU支持任意stride和任意kernel的maxpooling op</p></li>
<li><p>split算子支持h/w方向</p></li>
<li><p>Global average pooling支持更大的输入feature, feature HxW &lt;= 4096</p></li>
</ol>
<p><strong>Runtime</strong></p>
<p>[新增]</p>
<ol class="arabic simple">
<li><p>新增EfficientNet-Lite模型上板运行示例</p></li>
<li><p>新增pad op用于评测</p></li>
<li><p>新增DepthTospace op支持CPU计算</p></li>
<li><p>新增STN CPU相关op</p></li>
<li><p>新增网络结构兼容用于客户网络修改</p></li>
<li><p>支持双核双帧示例</p></li>
<li><p>支持多任务抢占</p></li>
<li><p>内存查看工具，查看模型加载以及运行时、BPU、CPU内存使用情况</p></li>
<li><p>新增接口用于将内存物理地址映射到虚拟地址</p></li>
</ol>
<p>[变更]</p>
<ol class="arabic simple">
<li><p>修改BPU API图像数据表示方式</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resize</span></code> 接口内部调整，优先调用 <code class="docutils literal notranslate"><span class="pre">pym</span></code>，次优先再调用 <code class="docutils literal notranslate"><span class="pre">roiresize</span></code>，同时优化resize在CPU上的性能</p></li>
<li><p>删除SDK中多余的so库，与系统软件解耦</p></li>
</ol>
<p><span class="gray">v1.0</span></p>
<dl class="field-list simple">
<dt class="field-odd">发布时间</dt>
<dd class="field-odd"><p>2020年6月2日</p>
</dd>
</dl>
<p>[新增]</p>
<ol class="arabic simple">
<li><p>添加 <code class="docutils literal notranslate"><span class="pre">hb_mapper</span></code> 命令行工具，用于模型转换。支持转换rgbp/bgrp/featuremap/gray输入类型的模型</p></li>
<li><p>添加 <code class="docutils literal notranslate"><span class="pre">hb_perf</span></code> / <code class="docutils literal notranslate"><span class="pre">vec_diff</span></code> 工具，用于用户debug</p></li>
<li><p>添加yolo/mobilenet/googlenet/resnet等sample</p></li>
<li><p>支持Caffe 1.0模型的转化、量化和编译</p></li>
<li><p>支持Normalize、PSROIPooling、Proposal、ROIPooling、Upsample、Permute、PassThrough、MatMul、RReLU、CReLU、Axpy、ReLU6、Resize扩展OP</p></li>
<li><p>支持基于最大值和KL的校准</p></li>
<li><p>添加了支持异构模型的runtime API</p></li>
<li><p>支持 <code class="docutils literal notranslate"><span class="pre">HB_BPU_resize</span></code> 的输入/输出为Y/NV12/BGR/RGB/BGRP/RGBP图像类型</p></li>
<li><p>支持 <code class="docutils literal notranslate"><span class="pre">HB_BPU_resize</span></code> 和 <code class="docutils literal notranslate"><span class="pre">HB_BPU_runModel</span></code> 接口设置输入数据的对齐stride</p></li>
<li><p>提供了一个在BPU虚拟地址和物理地址之间转换的接口</p></li>
<li><p>支持使用环境变量控制Runtime日志输出</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HB_BPU_runModel</span></code> 接口支持双核跑一帧图像的功能</p></li>
</ol>
<p>[变更]</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
<p>[修复]</p>
<blockquote>
<div><p>无</p>
</div></blockquote>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="chapter_5_custom_op_development.html" class="btn btn-neutral float-left" title="5. 自定义算子开发" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2021, Horizon Robotics.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>